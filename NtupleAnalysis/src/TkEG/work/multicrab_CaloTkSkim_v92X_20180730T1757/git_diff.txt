diff --git a/NtupleAnalysis/python/tools/styles.py b/NtupleAnalysis/python/tools/styles.py
index 4797ef9..bf70050 100644
--- a/NtupleAnalysis/python/tools/styles.py
+++ b/NtupleAnalysis/python/tools/styles.py
@@ -489,6 +489,14 @@ def getCaloStyle(i):
     else:
         styles[index]
 
+def getCaloStyleAlt(i):
+    if i==0:
+        return caloStyle1
+    elif i==1:
+        return caloStyle2
+    else:
+        styles[index]
+
 def getCaloTkStyle():
     return caloTkStyle
 
@@ -553,3 +561,11 @@ def getCaloLegend(i):
         return "CaloTk #it{Rel Iso}"
     else:
         return "Unknown"
+
+def getCaloLegendAlt(i):
+    if i==0:
+        return "Tracks + e/#gamma"
+    elif i==1:
+        return "Tracks + e/#gamma #it{Rel Iso}"
+    else:
+        return "Unknown"
diff --git a/NtupleAnalysis/src/Auxiliary/src/Datasets.C b/NtupleAnalysis/src/Auxiliary/src/Datasets.C
index 0b0328f..24aa866 100644
--- a/NtupleAnalysis/src/Auxiliary/src/Datasets.C
+++ b/NtupleAnalysis/src/Auxiliary/src/Datasets.C
@@ -325,6 +325,9 @@ void Datasets::CreateMcProductions_(void)
 
   Datasets TTPU200_PhaseIIFall17D("TT_TuneCUETP8M2T4_14TeV_L1TPU200", "TT_TuneCUETP8M2T4_14TeV_powheg_pythia8_PhaseIIFall17D_L1TPU200_93X", "/TT_TuneCUETP8M2T4_14TeV-powheg-pythia8" + path_PU200_v2, CP, cmssw, geometry, 200, 99328, 24, 2);
 
+  Datasets SingleTauNoPU_2023D17("SingleNeutrino_L1TnoPU", "RelValSingleTauFlatPt2To100_pythia8_93X_upgrade2023_realistic_v5_2023D17noPU_93X", "/RelValSingleTauFlatPt2To100_pythia8/CMSSW_9_3_7-93X_upgrade2023_realistic_v5_2023D17noPU-v2/GEN-SIM-DIGI-RAW", CP, cmssw, geometry, 0, 9000, 0, 1);
+
+
   Datasets SingleNeutrinoPU140_PhaseIIFall17D("SingleNeutrino_L1TPU140", "SingleNeutrino_PhaseIIFall17D_L1TPU140_93X", "/SingleNeutrino" + path_PU140_v1, CP, cmssw, geometry, 140, 500000, 0, 0);
   Datasets SingleNeutrinoPU200_PhaseIIFall17D("SingleNeutrino_L1TPU200", "SingleNeutrino_PhaseIIFall17D_L1TPU200_93X", "/SingleNeutrino" + path_PU200_v1, CP, cmssw, geometry, 200, 498400, 0, 0);
 
@@ -351,6 +354,8 @@ void Datasets::CreateMcProductions_(void)
   datasets_PhaseIIFall17D.push_back(TTNoPU_PhaseIIFall17D);
   datasets_PhaseIIFall17D.push_back(TTPU140_PhaseIIFall17D);
   datasets_PhaseIIFall17D.push_back(TTPU200_PhaseIIFall17D);
+  datasets_PhaseIIFall17D.push_back(SingleTauNoPU_2023D17);
+  datasets_PhaseIIFall17D.push_back(SingleTauPU200_2023D17);
   datasets_PhaseIIFall17D.push_back(SingleNeutrinoPU140_PhaseIIFall17D);
   datasets_PhaseIIFall17D.push_back(SingleNeutrinoPU200_PhaseIIFall17D);
   datasets_PhaseIIFall17D.push_back(GluGluHToTauTauM125NoPU_PhaseIIFall17D);
diff --git a/NtupleAnalysis/src/Auxiliary/src/Table.C b/NtupleAnalysis/src/Auxiliary/src/Table.C
index e9d9b2e..3212289 100644
--- a/NtupleAnalysis/src/Auxiliary/src/Table.C
+++ b/NtupleAnalysis/src/Auxiliary/src/Table.C
@@ -255,6 +255,10 @@ void Table::_EndTabular_(void)
     {
       AddBottomRow( hLine_ );
     }
+  AddBottomRow(hLine_);
+  AddBottomRow("\\end{tabular}");
+  AddBottomRow("\\end{center}");
+  AddBottomRow("\\end{table}");
   AddBottomRow("");
   
   return;
diff --git a/NtupleAnalysis/src/CaloTk/CaloTk.C b/NtupleAnalysis/src/CaloTk/CaloTk.C
index 3e9a3e7..85f621a 100644
--- a/NtupleAnalysis/src/CaloTk/CaloTk.C
+++ b/NtupleAnalysis/src/CaloTk/CaloTk.C
@@ -1226,26 +1226,26 @@ void CaloTk::BookHistos_(void)
   histoTools_.BookHisto_1D(hDiTau_Eff_RelIso_F , "DiTau_Eff_RelIso_F", "", 300, 0.0,  +300.0);
   
   // Turn-Ons
-  histoTools_.BookHisto_1D(hMcHadronicTau_VisEt, "McHadronicTau_VisEt", "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hCalo_TurnOn50      , "Calo_TurnOn50"      , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hTk_TurnOn50        , "Tk_TurnOn50"        , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hVtxIso_TurnOn50    , "VtxIso_TurnOn50"    , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hRelIso_TurnOn50    , "RelIso_TurnOn50"    , "", 40, 0.0,  +200.0);
-
-  histoTools_.BookHisto_1D(hCalo_TurnOn25  , "Calo_TurnOn25"   , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hTk_TurnOn25    , "Tk_TurnOn25"     , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hVtxIso_TurnOn25, "VtxIso_TurnOn25" , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hRelIso_TurnOn25, "RelIso_TurnOn25" , "", 40, 0.0,  +200.0);
+  histoTools_.BookHisto_1D(hMcHadronicTau_VisEt, "McHadronicTau_VisEt", "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hCalo_TurnOn50      , "Calo_TurnOn50"      , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hTk_TurnOn50        , "Tk_TurnOn50"        , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hVtxIso_TurnOn50    , "VtxIso_TurnOn50"    , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hRelIso_TurnOn50    , "RelIso_TurnOn50"    , "", 60, 0.0,  +300.0);
+
+  histoTools_.BookHisto_1D(hCalo_TurnOn25  , "Calo_TurnOn25"   , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hTk_TurnOn25    , "Tk_TurnOn25"     , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hVtxIso_TurnOn25, "VtxIso_TurnOn25" , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hRelIso_TurnOn25, "RelIso_TurnOn25" , "", 60, 0.0,  +300.0);
   
-  histoTools_.BookHisto_1D(hCalo_TurnOn_SingleTau50KHz  , "Calo_TurnOn_SingleTau50KHz"  , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hTk_TurnOn_SingleTau50KHz    , "Tk_TurnOn_SingleTau50KHz"    , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hVtxIso_TurnOn_SingleTau50KHz, "VtxIso_TurnOn_SingleTau50KHz", "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hRelIso_TurnOn_SingleTau50KHz, "RelIso_TurnOn_SingleTau50KHz", "", 40, 0.0,  +200.0);
+  histoTools_.BookHisto_1D(hCalo_TurnOn_SingleTau50KHz  , "Calo_TurnOn_SingleTau50KHz"  , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hTk_TurnOn_SingleTau50KHz    , "Tk_TurnOn_SingleTau50KHz"    , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hVtxIso_TurnOn_SingleTau50KHz, "VtxIso_TurnOn_SingleTau50KHz", "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hRelIso_TurnOn_SingleTau50KHz, "RelIso_TurnOn_SingleTau50KHz", "", 60, 0.0,  +300.0);
 
-  histoTools_.BookHisto_1D(hCalo_TurnOn_DiTau50KHz  , "Calo_TurnOn_DiTau50KHz"  , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hTk_TurnOn_DiTau50KHz    , "Tk_TurnOn_DiTau50KHz"    , "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hVtxIso_TurnOn_DiTau50KHz, "VtxIso_TurnOn_DiTau50KHz", "", 40, 0.0,  +200.0);
-  histoTools_.BookHisto_1D(hRelIso_TurnOn_DiTau50KHz, "RelIso_TurnOn_DiTau50KHz", "", 40, 0.0,  +200.0);
+  histoTools_.BookHisto_1D(hCalo_TurnOn_DiTau50KHz  , "Calo_TurnOn_DiTau50KHz"  , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hTk_TurnOn_DiTau50KHz    , "Tk_TurnOn_DiTau50KHz"    , "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hVtxIso_TurnOn_DiTau50KHz, "VtxIso_TurnOn_DiTau50KHz", "", 60, 0.0,  +300.0);
+  histoTools_.BookHisto_1D(hRelIso_TurnOn_DiTau50KHz, "RelIso_TurnOn_DiTau50KHz", "", 60, 0.0,  +300.0);
 
   // DiTau (Calo-Other)
   histoTools_.BookHisto_2D(hDiTau_Rate_Calo_Tk    , "DiTau_Rate_Calo_Tk"    , "" ,300, 0.0,  +300.0, 300, 0.0,  +300.0);
@@ -1807,7 +1807,6 @@ void CaloTk::FillTurnOn_Numerator_(vector<L1TkTauParticle> L1TkTaus,
       
       // Fill the turn-on
       hTurnOn->Fill( p.p4vis().Et() );
-
     } // For-loop: L1TkTaus
 
   return;
diff --git a/NtupleAnalysis/src/CaloTk/work/plotRateVsEff.py b/NtupleAnalysis/src/CaloTk/work/plotRateVsEff.py
index 7f7ee25..8d4eef9 100755
--- a/NtupleAnalysis/src/CaloTk/work/plotRateVsEff.py
+++ b/NtupleAnalysis/src/CaloTk/work/plotRateVsEff.py
@@ -166,7 +166,7 @@ def main(opts):
         style.setGridY(opts.gridY)
 
         # Define signal and background datasets names
-        datasetSignal = "ChargedHiggs200_14TeV_L1TPU140"#"TT_TuneCUETP8M2T4_14TeV_L1TPU140"#"GluGluHToTauTau_14TeV_L1TPU140"
+        datasetSignal = "GluGluHToTauTau_14TeV_L1TPU140" #"TT_TuneCUETP8M2T4_14TeV_L1TPU140"#"GluGluHToTauTau_14TeV_L1TPU140" #"ChargedHiggs200_14TeV_L1TPU140"
         datasetBkg    = "SingleNeutrino_L1TPU140"
 
         # Plot Histograms
@@ -205,6 +205,8 @@ def PlotRateVsEff(datasetsMgr, effHistoList, rateHistoList, datasetSignal, datas
             g3 = convert2RateVsEffTGraph(datasetsMgr, effHistoList[i], rateHistoList[i], datasetSignal, datasetBkg)
             g3.SetName("RelIso")
 
+    
+
     # Create & draw the plot
     p = plots.ComparisonManyPlot(g0, [g1,g2, g3], saveFormats=[])
     
@@ -214,7 +216,7 @@ def PlotRateVsEff(datasetsMgr, effHistoList, rateHistoList, datasetSignal, datas
         legendDict[hName] = styles.getCaloLegend(index)
         p.histoMgr.forHisto(hName, styles.getCaloStyle(index))
 
-        p.histoMgr.setHistoDrawStyle(h.getName(), "PX")                                                                                                     
+        p.histoMgr.setHistoDrawStyle(h.getName(), "LX")                                                                                                     
         p.histoMgr.setHistoLegendStyle(h.getName(), "LP")
 
     # Set legend labels
@@ -229,9 +231,23 @@ def PlotRateVsEff(datasetsMgr, effHistoList, rateHistoList, datasetSignal, datas
     #kwargs_["ylabel"] = ylabel
 
 
-
     # Draw and save the plot
     plots.drawPlot(p, saveName, **kwargs_) #the "**" unpacks the kwargs_ dictionary
+    # Draw
+    for i, g in enumerate([g0, g1, g2, g3]):
+        shapes, min, max = DrawErrorBand(g) 
+        for shape in shapes:
+            shape.SetFillColor( p.histoMgr.getHistos()[i].getRootHisto().GetFillColor())
+            shape.SetFillStyle(3003)
+            #shape.SetFillColorAlpha(p.histoMgr.getHistos()[i].getRootHisto().GetFillColor(), 0.15)
+            shape.Draw("f same")
+        #min.Draw("l same")
+        #min.SetLineColor( p.histoMgr.getHistos()[i].getRootHisto().GetLineColor())
+        #max.Draw("l same")
+        #max.SetLineColor( p.histoMgr.getHistos()[i].getRootHisto().GetLineColor())
+        # g0.Draw("l same")
+        ROOT.gPad.RedrawAxis()
+
 
     # Additional text                                                                                                                                                    
     histograms.addText(0.65, 0.38, plots._legendLabels[datasetSignal], 17)
@@ -239,6 +255,7 @@ def PlotRateVsEff(datasetsMgr, effHistoList, rateHistoList, datasetSignal, datas
         histograms.addText(0.77, 0.89,"DoubleTau", 20)
     else:
         histograms.addText(0.77, 0.89,"SingleTau", 20)
+
     # Save the plots in custom list of saveFormats
     SavePlot(p, saveName, os.path.join(opts.saveDir, opts.optMode, opts.folder), [".pdf",".png"] )          
 
@@ -267,6 +284,7 @@ def convert2RateVsEffTGraph(datasetsMgr, effHistoName, rateHistoName, datasetSig
     yerrh = []
     
     nBinsX = hEff.GetNbinsX()
+    nBins  = nBinsX
 
     for i in range (0, nBinsX):
         # Get values
@@ -276,34 +294,39 @@ def convert2RateVsEffTGraph(datasetsMgr, effHistoName, rateHistoName, datasetSig
         yVal  = hRate.GetBinContent(i)
         yLow  = hRate.GetBinError(i)
         yHigh = yLow            
-        
-        # Store values
-        x.append(xVal)
-        xerrl.append(xLow)
-        xerrh.append(xHigh)
-            
+
         # Force error bars to not be above (belo) 1.0 (0.0)
         if 0:
             if abs(yVal + yHigh) > 1.0:
                 yHigh = 1.0-yVal
             if yVal - yLow < 0.0:
                 yLow = yVal
-
         
         # WARNING! Ugly trick so that zero points are not visible on canvas
         if 1:
-            if yVal == 0.0:
-                yVal  = -0.1
-                yLow  = +0.0001
-                yHigh = +0.0001
-        
-        # Save final values
+            if xVal == 0.0:
+                #xVal  = -0.1
+                #xLow  = +0.0001
+                #xHigh = +0.0001
+                nBins=nBins-1
+                continue
+            #if yVal ==0.0:
+            #    yVal  = -0.1
+            #    yLow  = +0.0001
+            #    yHigh = +0.0001
+            #    nBins = nBins -1
+            #    continue
+            
+        # Store values
+        x.append(xVal)
+        xerrl.append(xLow)
+        xerrh.append(xHigh)
         y.append(yVal)
         yerrl.append(yLow)
         yerrh.append(yHigh)
         
     # Create the TGraph with asymmetric errors
-    tgraph = ROOT.TGraphAsymmErrors(nBinsX,
+    tgraph = ROOT.TGraphAsymmErrors(nBins,
                                     array.array("d",x),
                                     array.array("d",y),
                                     array.array("d",xerrl),
@@ -311,7 +334,7 @@ def convert2RateVsEffTGraph(datasetsMgr, effHistoName, rateHistoName, datasetSig
                                     array.array("d",yerrl),
                                     array.array("d",yerrh))
     
-
+    tgraph.GetXaxis().SetLimits(0.0, 1.0)
     # Construct info table (debugging)
     table  = []
     align  = "{0:>6} {1:^10} {2:>10} {3:>10} {4:>10} {5:^3} {6:<10}"
@@ -335,6 +358,64 @@ def convert2RateVsEffTGraph(datasetsMgr, effHistoName, rateHistoName, datasetSig
    
     return tgraph
 
+
+def DrawErrorBand(graph):
+    isErrorBand = graph.GetErrorXhigh(0) != -1 and graph.GetErrorXlow(0) != -1
+    npoints     = graph.GetN()
+ 
+    if not isErrorBand:
+        graph.Draw("l same")
+        return
+ 
+    # Declare individual TGraph objects used in drawing error band
+    central, min, max = ROOT.TGraph(), ROOT.TGraph(), ROOT.TGraph()
+    shapes = []
+    for i in range((npoints-1)*4):
+        shapes.append(ROOT.TGraph())
+ 
+    # Set ownership of TGraph objects
+    ROOT.SetOwnership(central, False)
+    ROOT.SetOwnership(    min, False)
+    ROOT.SetOwnership(    max, False)
+    for shape in shapes:
+        ROOT.SetOwnership(shape, False)
+ 
+    # Get data points from TGraphAsymmErrors
+    x, y, xmin, xmax = [], [], [], []
+    for i in range(npoints):
+        tmpX, tmpY = ROOT.Double(0), ROOT.Double(0)
+        graph.GetPoint(i, tmpX, tmpY)
+        x.append(tmpX)
+        y.append(tmpY)
+        xmin.append(tmpX - graph.GetErrorXlow(i))
+        xmax.append(tmpX + graph.GetErrorXhigh(i))
+
+    # Fill central, min and max graphs
+    for i in range(npoints):
+        # central.SetPoint(i, x[i], y[i])
+        min.SetPoint(i, xmin[i], y[i])
+        max.SetPoint(i, xmax[i], y[i])
+ 
+    # Fill shapes which will be shaded to create the error band
+    for i in range(npoints-1):
+        for version in range(4):
+            shapes[i+(npoints-1)*version].SetPoint((version+0)%4, xmax[i],   y[i])
+            shapes[i+(npoints-1)*version].SetPoint((version+1)%4, xmax[i+1], y[i+1])
+            shapes[i+(npoints-1)*version].SetPoint((version+2)%4, xmin[i+1], y[i+1])
+            shapes[i+(npoints-1)*version].SetPoint((version+3)%4, xmin[i],   y[i])
+ 
+    # Set attributes to those of input graph
+    # central.SetLineColor(graph.GetLineColor())
+    # central.SetLineStyle(graph.GetLineStyle())
+    # central.SetLineWidth(graph.GetLineWidth())
+    min.SetLineStyle(graph.GetLineStyle())
+    max.SetLineStyle(graph.GetLineStyle())
+#    for shape in shapes:
+ #       shape.SetFillStyle(3001)#3003)#graph.GetFillStyle())
+        
+    return shapes, min, max 
+
+
 def GetHistoKwargs(h, opts):
     _moveLegend = {"dx": -0.1, "dy": -0.55, "dh": -0.15}
     logY    = True
@@ -353,7 +434,7 @@ def GetHistoKwargs(h, opts):
         "addCmsText"       : True,
         "cmsExtraText"     : "Phase-2 Simulation",
         "cmsTextPosition"  : "outframe",
-        "opts"             : {"xmin": 0.0, "xmax": 0.7, "ymin": yMin, "ymax":1000, "ymaxfactor": yMaxF},
+        "opts"             : {"xmin": 0.0, "xmax": 1.0, "ymin": yMin, "ymax":1000, "ymaxfactor": yMaxF},
         "opts2"            : {"ymin": 0.59, "ymax": 1.41},
         "log"              : logY,
         "moveLegend"       : _moveLegend,
@@ -365,7 +446,7 @@ def GetHistoKwargs(h, opts):
     kwargs = copy.deepcopy(_kwargs)
     
     if "ditau" in h.lower():
-        kwargs["opts"]   = {"xmin": 0.0, "xmax": 0.6, "ymin": yMin, "ymax":2000, "ymaxfactor": yMaxF}
+        kwargs["opts"]   = {"xmin": 0.0, "xmax": 0.6, "ymin": yMin, "ymax":1000, "ymaxfactor": yMaxF}
 
 
     return kwargs
diff --git a/NtupleAnalysis/src/DataFormat/interface/L1TkEGParticle.h b/NtupleAnalysis/src/DataFormat/interface/L1TkEGParticle.h
index e3ddb18..40b1154 100644
--- a/NtupleAnalysis/src/DataFormat/interface/L1TkEGParticle.h
+++ b/NtupleAnalysis/src/DataFormat/interface/L1TkEGParticle.h
@@ -26,6 +26,7 @@ class L1TkEGParticle{
   void PrintTTTracks();
   void AddTrack(TTTrack trk) { theTracks.push_back(trk); }
   TTTrack GetLeadingTrack() const { return theTracks[0]; } 
+  vector<L1EG> GetEGs() const{ return theEGs;}
   bool HasMatchingGenParticle(void) const{return theMatching;}
   
   double GetTrackBasedPt();  
diff --git a/NtupleAnalysis/src/Framework/src/FileOpener.C b/NtupleAnalysis/src/Framework/src/FileOpener.C
index bf5c3a5..c08f7fe 100644
--- a/NtupleAnalysis/src/Framework/src/FileOpener.C
+++ b/NtupleAnalysis/src/Framework/src/FileOpener.C
@@ -24,12 +24,14 @@ TChain* FileOpener::OpenFiles(const string multicrabPath, const string dataset,
   vector<string> dirs      = GetListOfFiles(fullPath);
 
   // Sanity check
-  if (dirs.size() < 1)
-    {
-      cout << "\tFound " << dirs.size() << " ROOT files under directory " << fullPath << "! EXIT" << endl;
-      exit(1);      
-    }
-  else cout << "\tFound " << dirs.size() << " ROOT files under directory " << fullPath << endl;
+  if (0) {
+    if (dirs.size() < 1)
+      {
+	cout << "\tFound " << dirs.size() << " ROOT files under directory " << fullPath << "! EXIT" << endl;
+	exit(1);      
+      }
+    else cout << "\tFound " << dirs.size() << " ROOT files under directory " << fullPath << endl;
+  }
 
   // For-loop: All ROOT files
   for (vector<string>::iterator f = dirs.begin(); f != dirs.end(); f++)
@@ -72,7 +74,6 @@ string FileOpener::GetFirstFileName(const string multicrabPath, const string dat
 
   vector<string>::iterator f = dirs.begin();
   rootFileName = *f;
-  cout << "\tOpening file " << rootFileName << endl;
 
   ifstream file(rootFileName);
   
diff --git a/NtupleAnalysis/src/Framework/src/TreeReaderMC.C b/NtupleAnalysis/src/Framework/src/TreeReaderMC.C
index 1817d48..f40ad5e 100644
--- a/NtupleAnalysis/src/Framework/src/TreeReaderMC.C
+++ b/NtupleAnalysis/src/Framework/src/TreeReaderMC.C
@@ -60,6 +60,7 @@ void TreeReaderMC::GetHadronicTauFinalDaughters(GenParticle p,
   // pdgIds.push_back(20213); // alpha1(1260)+ 
     
 
+  // First Check that there is no lepton decay  
   // For-loop: All daughters
   for (unsigned int i = 0; i < p.daughtersIndex().size(); i++) 
     {
@@ -68,6 +69,16 @@ void TreeReaderMC::GetHadronicTauFinalDaughters(GenParticle p,
       GenParticle d      = GetGenParticle(index);
       int genD_pdgId     = abs(d.pdgId());
 
+      if ((genD_pdgId == 11) || (genD_pdgId == 12) || (genD_pdgId == 13) || (genD_pdgId == 14)) return;
+    }
+
+  // For-loop: All daughters
+  for (unsigned int i = 0; i < p.daughtersIndex().size(); i++)
+    {
+
+      unsigned int index = p.daughtersIndex().at(i);
+      GenParticle d      = GetGenParticle(index);
+      int genD_pdgId     = abs(d.pdgId());
 
       // Check if particle is of interest
       if ( std::find(pdgIds.begin(), pdgIds.end(), genD_pdgId) == pdgIds.end() )
@@ -255,7 +266,20 @@ vector<GenParticle> TreeReaderMC::GetHadronicGenTaus(vector<GenParticle> GenTaus
       bool bIsHadronicTau = (tau->finalDaughtersCharged().size() > 0);
 
       if (0) tau->PrintFinalDaughters();
-
+      /*
+      // marina :start
+      if (tau->finalDaughtersCharged().size() < 2){ 
+	// For-loop: All daughters                                                                                             
+	for (unsigned int i = 0; i < tau->daughtersIndex().size(); i++)
+	  {
+	    unsigned int index = tau->daughtersIndex().at(i);
+	    GenParticle d      = GetGenParticle(index);
+	    int genD_pdgId     = abs(d.pdgId());
+	    cout << genD_pdgId <<endl;
+	  }
+      }
+      // marina :end 
+      */
       // Apply acceptance cuts
       bool bPassVisEt  = ( tau->p4vis().Et() >= visEt);
       bool bPassVisEta = ( abs(tau->p4vis().Eta()) <= visEta );
diff --git a/NtupleAnalysis/src/TkCalo/TkCalo.C b/NtupleAnalysis/src/TkCalo/TkCalo.C
index d9c9d27..5f03322 100644
--- a/NtupleAnalysis/src/TkCalo/TkCalo.C
+++ b/NtupleAnalysis/src/TkCalo/TkCalo.C
@@ -40,7 +40,7 @@ void TkCalo::InitVars_()
   cfg_tk_nFitParams  = 4;           // Default: 4
   cfg_tk_minPt       = 2.00;        // Default: 2.0
   cfg_tk_minEta      = 0.0;         // Default: 0.0
-  cfg_tk_maxEta      = 1e6;         // Default: 1e6
+  cfg_tk_maxEta      = 1.44;        // Default: 1e6
   cfg_tk_maxChiSqRed = 1e6;         // Default: 1e6
   cfg_tk_minStubs    =   0;         // Default: 0
   cfg_tk_minStubsPS  =   0;         // Default: 0
@@ -56,7 +56,7 @@ void TkCalo::InitVars_()
   PrimaryVtxConstrain = false; // use the primary vertex
   DeltaZMax = 1.0; // | z_track - z_primaryvtx | < DeltaZMax in cm. 
   IsoCut=0.15; 
-  RelativeIsolation=true;
+  RelativeIsolation = true;
 
   // New parameters
   minStubs_trk      = 5; 
@@ -76,7 +76,7 @@ void TkCalo::InitVars_()
   maxDeltaR_iso     = 5.0;
   maxDeltaZ_iso     = 0.8;  // cm
   useRelIso         = true;
-  maxRelIso         = 0.15;
+  maxRelIso         = 0.20; //0.15
   
   return;
 
@@ -98,7 +98,7 @@ void TkCalo::PrintSettings(void)
 void TkCalo::Loop()
 //============================================================================
 {
-
+  
   // Sanity check
   if (fChain == 0) return;
   const Long64_t nEntries = (MaxEvents == -1) ? fChain->GetEntries() : min((int)fChain->GetEntries(), MaxEvents);
@@ -114,25 +114,28 @@ void TkCalo::Loop()
   unsigned int nAllEvts = fChain->GetEntries();
   bool isMinBias        = false;  
   // L1PixelTrackFit f(3.8112); // Bz in Tesla (for pixel re-fitting)
-
+  
   // Determine what sample this is
   std::size_t found = mcSample.find("SingleNeutrino");
-    if (found!=std::string::npos)
-      {
-	isMinBias = true;
-	std::cout << "Minimum Bias sample" << std::endl;
-      }
-    else
-      {
-	std::cout << "Not a Minimum Bias sample." << std::endl;
-      }
-    
+  if (found!=std::string::npos)
+    {
+      isMinBias = true;
+      std::cout << "Minimum Bias sample" << std::endl;
+    }
+  else
+    {
+      std::cout << "Not a Minimum Bias sample." << std::endl;
+    }
   
   ////////////////////////////////////////////////
   // For-loop: Entries
   ////////////////////////////////////////////////
-  for (int jentry = 0; jentry < nEntries; jentry++, nEvts++){
+  unsigned int counter_allTrkTauCand = 0;
+  unsigned int counter_hasGenTau = 0;
+  unsigned int counter_hasEG = 0;
   
+  for (int jentry = 0; jentry < nEntries; jentry++, nEvts++){
+    
     if(cfg_DEBUG) cout << "\tEntry = " << jentry << endl;
     
     // Init variables
@@ -140,7 +143,7 @@ void TkCalo::Loop()
     if (ientry < 0) break;
     nb = fChain->GetEntry(jentry);
     nbytes += nb;
-
+    
     ////////////////////////////////////////////////
     // Build collections
     ////////////////////////////////////////////////       
@@ -161,18 +164,18 @@ void TkCalo::Loop()
 
     // GenParticles (skip for MinBias samples)
     vector<GenParticle> GenTaus;
-	if (!isMinBias) GenTaus = GetGenParticles(15, false);
+    if (!isMinBias) GenTaus = GetGenParticles(15, false);
 	
-	// Hadronic GenTaus (skip for MinBias samples)
+    // Hadronic GenTaus (skip for MinBias samples)
     GenTausHadronic.clear();
     if (cfg_AddGenP) {
       if (cfg_DEBUG) cout << "\n=== GenParticles (" << GenP_Pt.size() << ")" << endl;
-	  if (!isMinBias) GenTausHadronic = GetHadronicGenTaus(GenTaus, 00.0, 999.9);
-	}
+      if (!isMinBias) GenTausHadronic = GetHadronicGenTaus(GenTaus, 00.0, 1.44);
+    }
 
     // Triggred GenTaus (skip for MinBias samples)
     vector<GenParticle> GenTausTrigger;  
-    if (!isMinBias) GenTausTrigger = GetHadronicGenTaus(GenTaus, 20.0, 2.4);  
+    if (!isMinBias) GenTausTrigger = GetHadronicGenTaus(GenTaus, 20.0, 1.44);  
     
     // Ensure that all taus are found, needed by the current efficiency definition 
     // E.g. for ttbar, only events with two taus within trigger acceptance are considered for efficiency calculation)
@@ -240,6 +243,7 @@ void TkCalo::Loop()
     float invMass;
     float pT;
     bool stopClustering;
+    //TLorentzVector p4sum; //marina
     for (size_t i=0; i<trackTauCandidates.size(); i++) {
         leadTrackPtr = &(trackTauCandidates[i][0]);
         int Ntrks = 1;
@@ -251,6 +255,7 @@ void TkCalo::Loop()
         unsigned int trkcounter_passDRmin = 0;
         unsigned int trkcounter_passInvMass = 0;    
 
+
         if (cfg_DEBUG*0) cout << "Starting to cluster lead track " << leadTrackPtr->index();
         // Loop over other tracks
         stopClustering = false;
@@ -270,7 +275,7 @@ void TkCalo::Loop()
           // Calculate invariant mass of already clustered tracks + new track
           invMass = 0.0;
           pT = 0.0;
-          TLorentzVector p4sum; // initialized to (0,0,0,0)
+	  TLorentzVector p4sum; // initialized to (0,0,0,0)  //marina
           for(size_t j=0; j < trackTauCandidates[i].size(); j++){
             p4sum += trackTauCandidates[i][j].p4();
           }
@@ -303,115 +308,171 @@ void TkCalo::Loop()
         h_clustTrks_counter->Fill("passDRmax",trkcounter_passDRmax,1);
         h_clustTrks_counter->Fill("passDRmin",trkcounter_passDRmin,1);
         h_clustTrks_counter->Fill("passInvMass",trkcounter_passInvMass,1);
-
+	
     }
+    
+    // EGs properties 
+    
+    // Fill histo with number of EGs
+    h_EGs_N -> Fill( L1EGs.size() );
+    // For-loop: All the EGs in the event
+    for (auto eg = L1EGs.begin(); ( !stopClustering && (eg != L1EGs.end()) ); eg++) {
+      
+      // Fill histos with EGs properties 
+      h_EGs_Et  -> Fill( eg->getEt() );
+      h_EGs_Eta -> Fill( eg->getEta() );
+      h_EGs_Phi -> Fill( eg->getPhi() );
+      h_EGs_IEta -> Fill( eg->getIEta() );
+      h_EGs_IPhi -> Fill( eg->getIPhi() );
+
+    }// For-loop: All the EGs in the event
 
     // Build EG clusters and create tau candidates
     vector<L1EG> EGcluster;
     TauCandidates.clear();
     double ET;
+    deltaR = 999.0; //marina
     for (size_t i=0; i<trackTauCandidates.size(); i++) {
-//        cout << "Clustering EGs around trackTauCandidates[" << i << "]" << endl;
-        EGcluster.clear();
-        ET = 0.0;
-        invMass = 0.0;
-        leadTrackPtr = &(trackTauCandidates[i][0]);
-        stopClustering = false;
-        TLorentzVector p4sum; // initialized to (0,0,0,0)  
-        // EG clustering counters
-        unsigned int counter_allEG = 0;
-        unsigned int counter_passEt = 0;
-        unsigned int counter_passDRmax = 0;
-        unsigned int counter_passDRmin = 0;
-        unsigned int counter_passInvMass = 0;    
-	for (auto eg = L1EGs.begin(); ( !stopClustering && (eg != L1EGs.end()) ); eg++) {
-          // Skip small-Et EGs and those not matching to lead track (in terms of DeltaR)
-          counter_allEG++;
-          // TODO: Correct eta of EG based on vertex position of the leading track?
-          if (eg->getEt() < minEt_EG) continue;
-          counter_passEt++;
-          deltaR = auxTools_.DeltaR(leadTrackPtr->getEta(), leadTrackPtr->getPhi(), eg->getEta(), eg->getPhi());
-          if (cfg_DEBUG*0) std::cout << "deltaR = " << deltaR << endl;
-          if (deltaR > maxDeltaR_EG) continue;
-          counter_passDRmax++;
-          if (deltaR < minDeltaR_EG) continue;
-          counter_passDRmin++;
-          p4sum += eg->p4();
-          if (p4sum.M() < maxInvMass_EG){
-            EGcluster.push_back(*eg);
-            counter_passInvMass++;
-            // Fill EG histograms
-            h_clustEGs_Et->Fill( eg->getEt() );
-            h_clustEGs_Eta->Fill( eg->getEta() );
-            h_clustEGs_Phi->Fill( eg->getPhi() );
-            h_clustEGs_Phi_Eta->Fill( eg->getPhi(),eg->getEta() );
-            h_clustEGs_M->Fill( eg->p4().M() );
-            // Update EG cluster variables
-            ET = p4sum.Et();
-            invMass = p4sum.M();
-//            cout << "Invariant mass of cluster is " << invMass << " and ET is " << ET << endl;
-          }
-          else {
-            stopClustering = true;
-            // Fill EG cluster variables to histograms
-            h_EGClusters_Et->Fill( ET );            
-            h_EGClusters_M->Fill( invMass );
-          }
-        }
-
-        // Fill EG clustering counter histogram
-        h_clustEGs_counter->Fill("allEGs",counter_allEG,1);
-        h_clustEGs_counter->Fill("passEt",counter_passEt,1);
-        h_clustEGs_counter->Fill("passDRmax",counter_passDRmax,1);
-        h_clustEGs_counter->Fill("passDRmin",counter_passDRmin,1);
-        h_clustEGs_counter->Fill("passInvMass",counter_passInvMass,1);
-                
-/*        cout << "EG COUNTERS:" << endl;
+      //cout << "Clustering EGs around trackTauCandidates[" << i << "]" << endl;
+      EGcluster.clear();
+      ET = 0.0;
+      invMass = 0.0;
+      leadTrackPtr = &(trackTauCandidates[i][0]);
+      stopClustering = false;
+      TLorentzVector p4sum; // initialized to (0,0,0,0)  //marina
+      // EG clustering counters
+      unsigned int counter_allEG = 0;
+      unsigned int counter_passEt = 0;
+      unsigned int counter_passDRmax = 0;
+      unsigned int counter_passDRmin = 0;
+      unsigned int counter_passInvMass = 0;    
+
+      //Increase counter for all trackTauCandidates 
+      counter_allTrkTauCand++;
+
+      // Calculate the p4sum of the tracks for each trackTau Candidate 
+      for(size_t j=0; j < trackTauCandidates[i].size(); j++){
+	p4sum += trackTauCandidates[i][j].p4();
+      }
+      
+      // Initialize the ET and the InvMass as the ET and the InvMass of the tracks
+      ET      = p4sum.Et();
+      invMass = p4sum.M();
+      
+      // For-loop: All the EGs in the event
+      for (auto eg = L1EGs.begin(); ( !stopClustering && (eg != L1EGs.end()) ); eg++) {
+
+	// Skip small-Et EGs and those not matching to lead track (in terms of DeltaR)
+	counter_allEG++;
+	// TODO: Correct eta of EG based on vertex position of the leading track?
+	if (eg->getEt() < minEt_EG) continue;
+	counter_passEt++;
+	deltaR = auxTools_.DeltaR(leadTrackPtr->getEta(), leadTrackPtr->getPhi(), eg->getEta(), eg->getPhi());
+	// Fill  dR histogram
+	h_leadTrk_EG_dR -> Fill (deltaR); 
+	if (cfg_DEBUG) std::cout << "deltaR = " << deltaR << endl;
+	// Skip if EG is not within the signal cone 
+	if (deltaR > maxDeltaR_EG) continue;
+	counter_passDRmax++;
+	if (deltaR < minDeltaR_EG) continue;
+	counter_passDRmin++;
+
+	p4sum += eg->p4();
+	
+	if (p4sum.M() < maxInvMass_EG){
+	  EGcluster.push_back(*eg);
+	  counter_passInvMass++;
+	  // Fill EG histograms
+	  h_clustEGs_Et->Fill( eg->getEt() );
+	  h_clustEGs_Eta->Fill( eg->getEta() );
+	  h_clustEGs_Phi->Fill( eg->getPhi() );
+	  h_clustEGs_Et_Eta->Fill( eg->getEt(),eg->getEta() );
+	  h_clustEGs_Phi_Eta->Fill( eg->getPhi(),eg->getEta() );
+	  h_clustEGs_M->Fill( eg->p4().M() );
+	  // Update EG cluster variables
+	  ET = p4sum.Et();
+	  invMass = p4sum.M();
+	  //cout << "Invariant mass of cluster is " << invMass << " and ET is " << ET << endl; //marina
+	}
+	else {
+	  stopClustering = true;
+	  // Fill EG cluster variables to histograms
+	  //if (EGcluster.size() >=1){
+	  h_EGClusters_Et->Fill( ET );            
+	  h_EGClusters_M->Fill( invMass );
+	    //}
+	}
+      }// For-loop: All the EGs in the event
+      //cout << "========================end==========================="<<endl;
+      // Fill EG clustering counter histogram
+      h_clustEGs_allEGs      -> Fill(counter_allEG);
+      h_clustEGs_passEt      -> Fill(counter_passEt);
+      h_clustEGs_passDRmax   -> Fill(counter_passDRmax);
+      h_clustEGs_passDRmin   -> Fill(counter_passDRmin);
+      h_clustEGs_passInvMass -> Fill(counter_passInvMass);
+      /*
+      h_clustEGs_counter->SetBinContent(1, counter_allEG);
+      h_clustEGs_counter->SetBinContent(2, counter_passEt);
+      h_clustEGs_counter->SetBinContent(3, counter_passDRmax);
+      h_clustEGs_counter->SetBinContent(4, counter_passDRmin);
+      h_clustEGs_counter->SetBinContent(5, counter_passInvMass);
+      */
+      /*cout << "EG COUNTERS:" << endl;
         cout << "allEG = " << counter_allEG << endl;
         cout << "passEt = " << counter_passEt << endl;
         cout << "passDRmax = " << counter_passDRmax << endl;
         cout << "passDRmin = " << counter_passDRmin << endl;
         cout << "passInvMass = " << counter_passInvMass << endl;                       
-        cout << "STOPPING EG clustering. Invariant mass of cluster is " << invMass << "and ET is " << ET << endl; */ 
-        
-        // Fill the number of EGs in cluster
-        h_EGClusters_MultiplicityPerCluster->Fill( EGcluster.size() );
-
-        // Find the genTau matching to the lead track
-        GenParticle genTau;
-        double deltaR_match = GetMatchingGenParticle(trackTauCandidates[i][0], &genTau);
-
-        bool hasGenTau = false;
-        if (deltaR_match < maxDeltaR_MCmatch) hasGenTau = true;
-
-        // Fill histograms with the matched genTau
-        if (hasGenTau){
-          // Properties of the genTau
-          hTkEG_VisEt->Fill( genTau.p4vis().Et() );
-          hTkEG_DeltaRmatch->Fill( deltaR_match );
-          // Pt resolution
-          TLorentzVector p4tracks; // initialized to (0,0,0,0) 
-          for (auto tk = trackTauCandidates[i].begin(); tk != trackTauCandidates[i].end(); tk++) {
-            p4tracks += tk->p4();
-          }
-          double pTresolution = ( p4tracks.Pt()-genTau.p4vis().Pt() ) / genTau.p4vis().Pt();
-          h_trkClusters_PtResolution->Fill(pTresolution);
-          // ET resolution
-          double ETresolution = ( ET -genTau.p4vis().Et() ) / genTau.p4vis().Et();
-          h_EGClusters_EtResolution->Fill(ETresolution);
-        }
-
-        // Build a tau candidate from tracks and EGs
-        L1TkEGParticle newTauCandidate(trackTauCandidates[i], EGcluster, genTau, hasGenTau);
-	if (cfg_DEBUG) { //marina
-	  cout << "Constructed a new tau candidate with a track invariant mass of " << newTauCandidate.GetTrackInvMass() 
-	       << ", an EG invariant mass of " << newTauCandidate.GetEGInvMass();
-	  if (hasGenTau) cout  << " and a generator tau with visible pT " << newTauCandidate.GetGenTauPt() << endl;
-	  else cout << " and does not have a matching generator tau" << endl;
+        cout << "STOPPING EG clustering. Invariant mass of cluster is " << invMass << "and ET is " << ET << endl; */
+      
+      // Fill the number of EGs in cluster
+      h_EGClusters_MultiplicityPerCluster->Fill( EGcluster.size() );
+      
+      // Find the genTau matching to the lead track
+      GenParticle genTau;
+      double deltaR_match = GetMatchingGenParticle(trackTauCandidates[i][0], &genTau);
+      
+      bool hasGenTau = false;
+      if (deltaR_match < maxDeltaR_MCmatch) hasGenTau = true;
+
+      // Fill histograms with the matched genTau
+      if (hasGenTau){
+	//Increase counter for trackTauCandidates which have a genTau
+	counter_hasGenTau++;
+	if (EGcluster.size() >=1) counter_hasEG++;
+	
+	// ET of TkEG when it has a matched genTau
+	hTkEG_matched_Et  -> Fill( ET );
+
+	// Properties of the genTau
+	hTkEG_genVisEt    -> Fill( genTau.p4vis().Et() );
+	hTkEG_DeltaRmatch -> Fill( deltaR_match );
+	// Pt resolution
+	TLorentzVector p4tracks; // initialized to (0,0,0,0) 
+	for (auto tk = trackTauCandidates[i].begin(); tk != trackTauCandidates[i].end(); tk++) {
+	  p4tracks += tk->p4();
 	}
-        TauCandidates.push_back(newTauCandidate);
+	double pTresolution = ( p4tracks.Pt()-genTau.p4vis().Pt() ) / genTau.p4vis().Pt();
+	h_trkClusters_PtResolution->Fill(pTresolution);
+	// ET resolution
+	double ETresolution = ( ET -genTau.p4vis().Et() ) / genTau.p4vis().Et(); //marina
+	h_EGClusters_EtResolution->Fill(ETresolution);
+      }
+      
+      // Build a tau candidate from tracks and EGs
+      L1TkEGParticle newTauCandidate(trackTauCandidates[i], EGcluster, genTau, hasGenTau);
+      if (cfg_DEBUG) { //marina
+	cout << "Constructed a new tau candidate with a track invariant mass of " << newTauCandidate.GetTrackInvMass() 
+	     << ", an EG invariant mass of " << newTauCandidate.GetEGInvMass();
+	if (hasGenTau) cout  << " and a generator tau with visible pT " << newTauCandidate.GetGenTauPt() << endl;
+	else cout << " and does not have a matching generator tau" << endl;
+      }
+
+
+      TauCandidates.push_back(newTauCandidate);
     }  
-       
+ 
+   
     // Check relative isolation of tau candidates
     float relIso = -1.0;
     float ptSum;
@@ -436,13 +497,20 @@ void TkCalo::Loop()
         TauCandidatesIsolated.push_back(*tkeg);
       }
     }
-    
+
+    // Fill MCmatch counters 
+    h_MCmatch_counters -> SetBinContent(1, counter_allTrkTauCand);
+    h_MCmatch_counters -> SetBinContent(2, counter_hasGenTau    );
+    h_MCmatch_counters -> SetBinContent(3, counter_hasEG        );
+
     ////////////////////////////////////////////////
     // Fill Turn-On histograms
     ////////////////////////////////////////////////
 
     // Fill visible Et of hadronic taus to a histogram
     for (vector<GenParticle>::iterator tau = GenTausHadronic.begin(); tau != GenTausHadronic.end(); tau++) hMcHadronicTau_VisEt->Fill( tau->p4vis().Et() );
+    //for (vector<GenParticle>::iterator tau = GenTausTrigger.begin(); tau != GenTausTrigger.end(); tau++) hMcHadronicTau_VisEt->Fill( tau->p4vis().Et() );
+
 
     // Fill turn-on numerators
     FillTurnOn_Numerator_(TauCandidates, 25.0, hTurnOn25_all);
@@ -453,19 +521,24 @@ void TkCalo::Loop()
     ////////////////////////////////////////////////
     // Rates and efficiencies for single tau
     ////////////////////////////////////////////////
-    FillSingleTau_(TauCandidates, hRateSingleTau, hEffSingleTau);
+    FillSingleTau_(TauCandidates, hRateSingleTau_all, hEffSingleTau_all);
     FillSingleTau_(TauCandidates, hRateSingleTau_C, hEffSingleTau_C, 0.0, 1.0);
     FillSingleTau_(TauCandidates, hRateSingleTau_I, hEffSingleTau_I, 1.0, 1.6);
     FillSingleTau_(TauCandidates, hRateSingleTau_F, hEffSingleTau_F, 1.6, 3.0); // 2.5 is max
 
+    FillSingleTau_(TauCandidatesIsolated, hRateSingleTau_relIso, hEffSingleTau_relIso);
+    
+
     ////////////////////////////////////////////////
     // Rates and efficiencies for ditau
     ////////////////////////////////////////////////
-    FillDiTau_(TauCandidates, hRateDiTau, hEffDiTau);
+    FillDiTau_(TauCandidates, hRateDiTau_all, hEffDiTau_all);
     FillDiTau_(TauCandidates, hRateDiTau_C, hEffDiTau_C, 0.0, 1.0);
     FillDiTau_(TauCandidates, hRateDiTau_I, hEffDiTau_I, 1.0, 1.6);
     FillDiTau_(TauCandidates, hRateDiTau_F, hEffDiTau_F, 1.6, 3.0); // 2.5 is max
 
+    FillDiTau_(TauCandidatesIsolated, hRateDiTau_relIso, hEffDiTau_relIso);
+
 
     ////////////////////////////////////////////////
     // WARNING: Erases L1TkTaus from vector!
@@ -501,36 +574,39 @@ void TkCalo::Loop()
   histoTools_.DivideHistos_1D(hTurnOn50_relIso, hMcHadronicTau_VisEt); 
   
   // Convert rate histograms
-  histoTools_.ConvertToRateHisto_1D(hRateSingleTau, nEntries);
+  histoTools_.ConvertToRateHisto_1D(hRateSingleTau_all, nEntries);
   histoTools_.ConvertToRateHisto_1D(hRateSingleTau_C, nEntries);
   histoTools_.ConvertToRateHisto_1D(hRateSingleTau_I, nEntries);
   histoTools_.ConvertToRateHisto_1D(hRateSingleTau_F, nEntries);
-  histoTools_.ConvertToRateHisto_1D(hRateDiTau, nEntries);
+
+  histoTools_.ConvertToRateHisto_1D(hRateSingleTau_relIso, nEntries);
+
+  histoTools_.ConvertToRateHisto_1D(hRateDiTau_all, nEntries);
   histoTools_.ConvertToRateHisto_1D(hRateDiTau_C, nEntries);
   histoTools_.ConvertToRateHisto_1D(hRateDiTau_I, nEntries);
   histoTools_.ConvertToRateHisto_1D(hRateDiTau_F, nEntries);
 
+  histoTools_.ConvertToRateHisto_1D(hRateDiTau_relIso, nEntries);
+
   // Finalise efficiency histograms
-  FinaliseEffHisto_(hEffSingleTau  , nEvtsWithMaxHTaus);
+  FinaliseEffHisto_(hEffSingleTau_all  , nEvtsWithMaxHTaus);
   FinaliseEffHisto_(hEffSingleTau_C, nEvtsWithMaxHTaus);
   FinaliseEffHisto_(hEffSingleTau_I, nEvtsWithMaxHTaus);
   FinaliseEffHisto_(hEffSingleTau_F, nEvtsWithMaxHTaus);
-  FinaliseEffHisto_(hRateDiTau  , nEvtsWithMaxHTaus);
+
+  FinaliseEffHisto_(hEffSingleTau_relIso  , nEvtsWithMaxHTaus);
+
+  FinaliseEffHisto_(hRateDiTau_all  , nEvtsWithMaxHTaus);
   FinaliseEffHisto_(hRateDiTau_C, nEvtsWithMaxHTaus);
   FinaliseEffHisto_(hRateDiTau_I, nEvtsWithMaxHTaus);
   FinaliseEffHisto_(hRateDiTau_F, nEvtsWithMaxHTaus);
 
+  FinaliseEffHisto_(hRateDiTau_relIso  , nEvtsWithMaxHTaus);
 
   ////////////////////////////////////////////////
   // Write the histograms to the file
   ////////////////////////////////////////////////
-
-  ////////////////////////////////////////////////
-  // Write the histograms to the file
-  ////////////////////////////////////////////////
-  outFile->cd();
   WriteHistos_();
-  outFile->Write();
   auxTools_.StopwatchStop(5, "minutes", "Total Time");
 
 }
@@ -564,38 +640,38 @@ void TkCalo::BookHistos_(void)
   histoTools_.BookHisto_1D(hCounters, "Counters",  "", 2, 0.0, +2.0);
 
   // Number of genuine hadronic taus (per event)
-  histoTools_.BookHisto_1D(h_genTausHad_N, "genTausHadronic_N", ";Number of genuine hadronic taus in event;Events / bin", 4, -0.5, +4.5);
+  histoTools_.BookHisto_1D(h_genTausHad_N, "genTausHadronic_N", ";Number of genuine hadronic taus in event;Events / bin", 5, -0.5, +4.5);
 
   // Number of lead tracks (per event)
-  histoTools_.BookHisto_1D(h_leadTrks_Multiplicity, "leadTrks_Multiplicity", ";Number of lead tracks in event;Events / bin", 30, -0.5, +14.5);
+  histoTools_.BookHisto_1D(h_leadTrks_Multiplicity, "leadTrks_Multiplicity", ";Number of lead tracks in event;Events / bin", 15, -0.5, +14.5);
 
   // Lead track Pt
-  histoTools_.BookHisto_1D(h_leadTrks_Pt, "leadTrks_Pt", ";Pt (GeV);Tracks / bin", 300, +0.0, +300.0);
+  histoTools_.BookHisto_1D(h_leadTrks_Pt, "leadTrks_Pt", ";p_{T} (GeV);Tracks / bin", 300, +0.0, +300.0);
 
   // Lead track Eta
-  histoTools_.BookHisto_1D(h_leadTrks_Eta, "leadTrks_Eta", ";#eta;Tracks / bin", 600, -3.0, +3.0);
+  histoTools_.BookHisto_1D(h_leadTrks_Eta, "leadTrks_Eta", ";#eta;Tracks / bin", 60, -3.0, +3.0);
 
   // Lead track Phi
-  histoTools_.BookHisto_1D(h_leadTrks_Phi, "leadTrks_Phi", ";#phi (rads);Tracks / bin", 23,  -3.15,  +3.15);
+  histoTools_.BookHisto_1D(h_leadTrks_Phi, "leadTrks_Phi", ";#phi (rads);Tracks / bin", 21,  -3.15,  +3.15);
   
   // Lead tracks in Eta-Phi plane
   // (Syntax: BookHisto_2D(histogram, hName, hTitle, binsX, xMin, xMax, binsY, yMin, yMax)
-  histoTools_.BookHisto_2D(h_leadTrks_Phi_Eta, "leadTrks_Phi_Eta",  ";#phi (rads);#eta", 230,  -3.15,  +3.15, 600,  -3.0,  +3.0);  
+  histoTools_.BookHisto_2D(h_leadTrks_Phi_Eta, "leadTrks_Phi_Eta",  ";#phi (rads);#eta", 210,  -3.15,  +3.15, 600,  -3.0,  +3.0);  
 
   // Counters for the selection of lead tracks
   histoTools_.BookHisto_1D(h_leadTrkSelection, "leadTrkSelection", "", 5,  0.0,  5.0);  
 
   // Clustered tracks Pt
-  histoTools_.BookHisto_1D(h_clustTrks_Pt, "clustTrks_Pt", ";Pt (GeV);Tracks / bin", 300, +0.0, +300.0);
+  histoTools_.BookHisto_1D(h_clustTrks_Pt, "clustTrks_Pt", ";p_{T} (GeV);Tracks / bin", 300, +0.0, +300.0);
 
   // Clustered tracks Eta
-  histoTools_.BookHisto_1D(h_clustTrks_Eta, "clustTrks_Eta", ";#eta;Tracks / bin", 600, -3.0, +3.0);
+  histoTools_.BookHisto_1D(h_clustTrks_Eta, "clustTrks_Eta", ";#eta;Tracks / bin", 60, -3.0, +3.0);
 
   // Clustered tracks Phi
-  histoTools_.BookHisto_1D(h_clustTrks_Phi, "clustTrks_Phi", ";#phi (rads);Tracks / bin", 23,  -3.15,  +3.15);
+  histoTools_.BookHisto_1D(h_clustTrks_Phi, "clustTrks_Phi", ";#phi (rads);Tracks / bin", 21,  -3.15,  +3.15);
   
   // Clustered tracks in Eta-Phi plane
-  histoTools_.BookHisto_2D(h_clustTrks_Phi_Eta, "clustTrks_Phi_Eta",  ";#phi (rads);#eta", 230,  -3.15,  +3.15, 600,  -3.0,  +3.0);  			      
+  histoTools_.BookHisto_2D(h_clustTrks_Phi_Eta, "clustTrks_Phi_Eta",  ";#phi (rads);#eta", 210,  -3.15,  +3.15, 300,  -3.0,  +3.0);  			      
 
   // Track clustering counter
   histoTools_.BookHisto_2D(h_clustTrks_counter, "clustTrks_counter", ";Selection steps;clustered tracks / selection step", 6, 0., 6., 150, 0., 300.);
@@ -608,34 +684,66 @@ void TkCalo::BookHistos_(void)
   h_clustTrks_counter->SetMarkerStyle(24);
 
   // Number of clustered tracks (per cluster)
-  histoTools_.BookHisto_1D(h_trkClusters_MultiplicityPerCluster, "trkClusters_MultiplicityPerCluster", ";Number of tracks in cluster;Clusters / bin", 15, 0., +15.);
+  histoTools_.BookHisto_1D(h_trkClusters_MultiplicityPerCluster, "trkClusters_MultiplicityPerCluster", ";Number of tracks in cluster;Clusters / bin", 16, -0.5, +15.5);
 
   // Pt of track clusters
-  histoTools_.BookHisto_1D(h_trkClusters_Pt, "trkClusters_Pt", ";Pt (GeV);Clusters / bin", 300, +0.0, +300.0);
+  histoTools_.BookHisto_1D(h_trkClusters_Pt, "trkClusters_Pt", ";p_{T} (GeV);Clusters / bin", 300, +0.0, +300.0);
 
   // Pt resolution of track clusters
-  histoTools_.BookHisto_1D(h_trkClusters_PtResolution, "trkClusters_PtResolution", ";Pt resolution (GeV);Clusters / bin", 50, -5.0, +5.0);
+  histoTools_.BookHisto_1D(h_trkClusters_PtResolution, "trkClusters_PtResolution", ";p_{T} resolution (GeV);Clusters / bin", 50, -5.0, +5.0);
   
   // Invariant mass of track clusters
   histoTools_.BookHisto_1D(h_trkClusters_M, "trkClusters_M", ";Invariant mass;Clusters / bin", 40, 0.0, +4.0);
 
+  // Number of EGs                                                                                                                                                       
+  histoTools_.BookHisto_1D(h_EGs_N, "EGs_Multiplicity", "Number of EGs in the event ; entries / bin", 11, -0.5, +10.5);
+
+  // EGs Et                                                                                                                                                       
+  histoTools_.BookHisto_1D(h_EGs_Et, "EGs_Et", ";E_{T} (GeV) ;EGs / bin", 300, 0.0, +300.0);
+
+  // EGs Eta 
+  histoTools_.BookHisto_1D(h_EGs_Eta, "EGs_Eta", ";#eta ;EGs / bin", 64, -1.6, +1.6);
+
+  // EGs Phi
+  histoTools_.BookHisto_1D(h_EGs_Phi, "EGs_Phi", ";#phi (rads);EGs / bin", 36,  -3.15,  +3.15);
+
+  // EGs IEta
+  histoTools_.BookHisto_1D(h_EGs_IEta, "EGs_IEta", ";i#eta;EGs / bin", 70, -35, +35); 
+
+  // EGs IPhi
+  histoTools_.BookHisto_1D(h_EGs_IPhi, "EGs_IPhi", ";i#phi;EGs / bin", 36,  0,  145);
+
+  // DR of lead trk and EGs
+  histoTools_.BookHisto_1D(h_leadTrk_EG_dR, "leadTrk_EG_dR", ";#DeltaR(trk_{ldg}, EG); entries / bin",   60,  0.0,   +6.0);
+
+  // Clustered EGs counters
+  histoTools_.BookHisto_1D(h_clustEGs_allEGs, "clustEGs_allEGs", ";N_{EGs} (all) ; entries / bin", 16, -0.5, +15.5);
+  histoTools_.BookHisto_1D(h_clustEGs_passEt, "clustEGs_passEt", ";N_{EGs} (pass E_{T}) ; entries / bin", 11, -0.5, +10.5);
+  histoTools_.BookHisto_1D(h_clustEGs_passDRmax, "clustEGs_passDRmax", ";N_{EGs} (pass #DeltaR_{max}) ; entries / bin", 11, -0.5, +10.5);
+  histoTools_.BookHisto_1D(h_clustEGs_passDRmin, "clustEGs_passDRmin", ";N_{EGs} (pass #DeltaR_{min}) ; entries / bin", 11, -0.5, +10.5);
+  histoTools_.BookHisto_1D(h_clustEGs_passInvMass, "clustEGs_passInvMass", ";N_{EGs} (pass InvMass) ; entries / bin", 11, -0.5, +10.5);
+
   // Clustered EGs Pt
-  histoTools_.BookHisto_1D(h_clustEGs_Et, "clustEGs_Pt", ";Pt (GeV);Events / bin", 300, +0.0, +300.0);
+  histoTools_.BookHisto_1D(h_clustEGs_Et, "clustEGs_Et", ";E_{T} (GeV);Events / bin", 60, +0.0, +300.0);
 
   // Clustered EGs Eta
-  histoTools_.BookHisto_1D(h_clustEGs_Eta, "clustEGs_Eta", ";#eta;EGs / bin", 600, -3.0, +3.0);
+  histoTools_.BookHisto_1D(h_clustEGs_Eta, "clustEGs_Eta", ";#eta;EGs / bin", 60, -3.0, +3.0);
 
   // Clustered EGs Phi
-  histoTools_.BookHisto_1D(h_clustEGs_Phi, "clustEGs_Phi", ";#phi (rads);EGs / bin", 23,  -3.15,  +3.15);
+  histoTools_.BookHisto_1D(h_clustEGs_Phi, "clustEGs_Phi", ";#phi (rads);EGs / bin", 21,  -3.15,  +3.15);
 
+  // Clustered EGs in Pt-Eta plane                                                           
+  histoTools_.BookHisto_2D(h_clustEGs_Et_Eta, "clustEGs_Et_Eta",  ";E_{T} (GeV);#eta", 60,  0.0,  +300.0, 60,  -3.0,  +3.0);
+  
   // Clustered EGs in Eta-Phi plane
-  histoTools_.BookHisto_2D(h_clustEGs_Phi_Eta, "clustEGs_Phi_Eta",  ";#phi (rads);#eta", 230,  -3.15,  +3.15, 600,  -3.0,  +3.0);		      
+  histoTools_.BookHisto_2D(h_clustEGs_Phi_Eta, "clustEGs_Phi_Eta",  ";#phi (rads);#eta", 230,  -3.15,  +3.15, 300,  -3.0,  +3.0);		      
 
   // Mass of clustered EGs
-  histoTools_.BookHisto_1D(h_clustEGs_M, "clustEGs_M", ";Mass (GeV);clustered EGs / bin", 40, 0.0, +2.0);
+  histoTools_.BookHisto_1D(h_clustEGs_M, "clustEGs_M", ";Mass (GeV);clustered EGs / bin", 40, 0.0, +4.0);
 
   // EG clustering counter
-  histoTools_.BookHisto_2D(h_clustEGs_counter, "clustEGs_counter", ";Selection steps;clustered EGs / selection step", 5, 0.0, +5.0, 15, 0., 15.);
+  //histoTools_.BookHisto_2D(h_clustEGs_counter, "clustEGs_counter", ";Selection steps;clustered EGs / selection step", 5, 0.0, +5.0, 15, 0., 15.);
+  histoTools_.BookHisto_1D(h_clustEGs_counter, "clustEGs_counter", ";Selection steps;clustered EGs / selection step", 5, 0.0, +5.0);
   h_clustEGs_counter->GetXaxis()->SetBinLabel(1,"allEGs");
   h_clustEGs_counter->GetXaxis()->SetBinLabel(2,"passEt");
   h_clustEGs_counter->GetXaxis()->SetBinLabel(3,"passDRmax");
@@ -644,10 +752,10 @@ void TkCalo::BookHistos_(void)
   h_clustEGs_counter->SetMarkerStyle(24);
 
   // Number of EGs (per cluster)
-  histoTools_.BookHisto_1D(h_EGClusters_MultiplicityPerCluster, "EGClusters_MultiplicityPerCluster", ";Number of EGs in cluster;Clusters / bin", 15, -0., +15.);
+  histoTools_.BookHisto_1D(h_EGClusters_MultiplicityPerCluster, "EGClusters_MultiplicityPerCluster", ";Number of EGs in cluster;Clusters / bin", 16, -0.5, +15.5);
 
   // Et of EG clusters
-  histoTools_.BookHisto_1D(h_EGClusters_Et, "EGClusters_Et", ";Et (GeV);Clusters / bin", 300, +0.0, +300.0);
+  histoTools_.BookHisto_1D(h_EGClusters_Et, "EGClusters_Et", ";Et (GeV);Clusters / bin", 60, +0.0, +300.0);
 
   // Et resolution of EG clusters
   histoTools_.BookHisto_1D(h_EGClusters_EtResolution, "EGClusters_EtResolution", ";Et resolution (GeV);Clusters / bin", 50, -5.0, +5.0);
@@ -657,16 +765,25 @@ void TkCalo::BookHistos_(void)
 
   // Track-based relative isolation of tau candidates
   histoTools_.BookHisto_1D(h_trkClusters_relIso, "trkClusters_relIso", ";Relative isolation;Clusters / bin", 100, 0.0, +5.0);
+  
+  // Et of the tkeg when it has a matched genTau
+  histoTools_.BookHisto_1D(hTkEG_matched_Et, "TkEG_matched_Et", ";E_{T} (GeV); TkEGs / bin", 40, 0.0,  +200.0);
 
   // DeltaR in MC matching of the lead track of tau candidates
   histoTools_.BookHisto_1D(hTkEG_DeltaRmatch  , "TkEG_DeltaRmatch"  , ";#Delta R;Particles / bin",   100,  0.0,   +1.0);
-
+  
   // Visible Et of the matched generator taus
-  histoTools_.BookHisto_1D(hTkEG_VisEt, "TkEG_VisEt", ";VisEt (GeV);Particles / bin", 40, 0.0,  +200.0);
-
+  histoTools_.BookHisto_1D(hTkEG_genVisEt, "TkEG_genVisEt", ";E_{T}^{vis} (gen) (GeV);Particles / bin", 40, 0.0,  +200.0);
+  
   // Visible Et of all generator taus
   histoTools_.BookHisto_1D(hMcHadronicTau_VisEt, "hMcHadronicTau_VisEt", ";VisEt (GeV);Particles / bin", 40, 0.0,  +200.0);
 
+  histoTools_.BookHisto_1D(h_MCmatch_counters, "MCmatch_counters", ";;Events", 3, 0, 3);
+  h_MCmatch_counters->GetXaxis()->SetBinLabel(1, "All TrkClusters");
+  h_MCmatch_counters->GetXaxis()->SetBinLabel(2, "MC Matched");
+  h_MCmatch_counters->GetXaxis()->SetBinLabel(3, "EG associated");
+  
+
   // Turn-on histograms
   histoTools_.BookHisto_1D(hTurnOn25_all, "TurnOn25_all", ";track cluster p_{T} (GeV); Efficiency / bin", 40, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hTurnOn25_relIso, "TurnOn25_relIso", ";track cluster p_{T} (GeV); Efficiency / bin", 40, 0.0,  +200.0);
@@ -674,28 +791,36 @@ void TkCalo::BookHistos_(void)
   histoTools_.BookHisto_1D(hTurnOn50_relIso, "TurnOn50_relIso", ";track cluster p_{T} (GeV); Efficiency / bin", 40, 0.0,  +200.0);
   
   // Single-tau rates
-  histoTools_.BookHisto_1D(hRateSingleTau    , "Rate_SingleTau"    , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
+  histoTools_.BookHisto_1D(hRateSingleTau_all, "Rate_SingleTau_all"    , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hRateSingleTau_C  , "Rate_SingleTau_C"  , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hRateSingleTau_I  , "Rate_SingleTau_I"  , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hRateSingleTau_F  , "Rate_SingleTau_F"  , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);  
+  
+  histoTools_.BookHisto_1D(hRateSingleTau_relIso  , "Rate_SingleTau_RelIso"    , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
 
   // Di-tau rates
-  histoTools_.BookHisto_1D(hRateDiTau    , "Rate_DiTau"    , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
+  histoTools_.BookHisto_1D(hRateDiTau_all, "Rate_DiTau_all"    , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hRateDiTau_C  , "Rate_DiTau_C"  , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hRateDiTau_I  , "Rate_DiTau_I"  , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hRateDiTau_F  , "Rate_DiTau_F"  , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);  
+
+  histoTools_.BookHisto_1D(hRateDiTau_relIso    , "Rate_DiTau_RelIso"    , ";track cluster p_{T} threshold (GeV); Rate (kHz) / bin", 200, 0.0,  +200.0);
   
   // Single-tau efficiencies
-  histoTools_.BookHisto_1D(hEffSingleTau     , "Eff_SingleTau"     , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
+  histoTools_.BookHisto_1D(hEffSingleTau_all , "Eff_SingleTau_all"     , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hEffSingleTau_C   , "Eff_SingleTau_C"   , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hEffSingleTau_I   , "Eff_SingleTau_I"   , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hEffSingleTau_F   , "Eff_SingleTau_F"   , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
 
+  histoTools_.BookHisto_1D(hEffSingleTau_relIso     , "Eff_SingleTau_RelIso"     , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
+
   // Di-tau efficiencies
-  histoTools_.BookHisto_1D(hEffDiTau     , "Eff_DiTau"     , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
+  histoTools_.BookHisto_1D(hEffDiTau_all , "Eff_DiTau_all"     , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hEffDiTau_C   , "Eff_DiTau_C"   , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hEffDiTau_I   , "Eff_DiTau_I"   , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
   histoTools_.BookHisto_1D(hEffDiTau_F   , "Eff_DiTau_F"   , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
+
+  histoTools_.BookHisto_1D(hEffDiTau_relIso     , "Eff_DiTau_RelIso"     , ";track cluster p_{T} threshold (GeV); Efficiency / bin", 200, 0.0,  +200.0);
   
   return;
 }
@@ -705,23 +830,26 @@ void TkCalo::BookHistos_(void)
 void TkCalo::WriteHistos_(void)
 //============================================================================
 {
+  // Location -> outFile
+  outFile->cd();
+  
+  // Write Counters
   hCounters->Write();
 
+  // Write 1-D histograms
   h_genTausHad_N->Write();
   h_leadTrks_Multiplicity->Write();
 
   h_leadTrks_Pt->Write();
   h_leadTrks_Eta->Write();
   h_leadTrks_Phi->Write();
-  h_leadTrks_Phi_Eta->Write();
 
   h_leadTrkSelection->Write();
 
   h_clustTrks_Pt->Write();
   h_clustTrks_Eta->Write();
   h_clustTrks_Phi->Write();
-  h_clustTrks_Phi_Eta->Write();
-  h_clustTrks_counter->Write();
+  //h_clustTrks_counter->Write();
 
   h_trkClusters_MultiplicityPerCluster->Write();
   h_trkClusters_Pt->Write();
@@ -731,10 +859,23 @@ void TkCalo::WriteHistos_(void)
   h_clustEGs_Et->Write();
   h_clustEGs_Eta->Write();
   h_clustEGs_Phi->Write();
-  h_clustEGs_Phi_Eta->Write();
   h_clustEGs_M->Write();
 
-  h_clustEGs_counter->Write();
+  h_EGs_N -> Write();
+  h_EGs_Et->Write();
+  h_EGs_Eta->Write();
+  h_EGs_Phi->Write();
+  h_EGs_IEta->Write();
+  h_EGs_IPhi->Write();
+
+  h_clustEGs_allEGs      -> Write();
+  h_clustEGs_passEt      -> Write();
+  h_clustEGs_passDRmax   -> Write();
+  h_clustEGs_passDRmin   -> Write();
+  h_clustEGs_passInvMass -> Write();
+
+  h_leadTrk_EG_dR->Write();
+
   h_EGClusters_MultiplicityPerCluster->Write();
   h_EGClusters_Et->Write();
   h_EGClusters_EtResolution->Write();
@@ -742,35 +883,57 @@ void TkCalo::WriteHistos_(void)
 
   h_trkClusters_relIso->Write();
 
+  hTkEG_matched_Et->Write();
   hTkEG_DeltaRmatch->Write();
-  hTkEG_VisEt->Write();
+  hTkEG_genVisEt->Write();
   hMcHadronicTau_VisEt->Write();
+  
+  h_MCmatch_counters->Write(); 
 
   hTurnOn25_all->Write();
   hTurnOn25_relIso->Write();
   hTurnOn50_all->Write();
   hTurnOn50_relIso->Write();
 
-  hRateSingleTau->Write(); // Inclusive = C+I+F                                                                                                                   
+  hRateSingleTau_all->Write(); // Inclusive = C+I+F                                                                                                                   
   hRateSingleTau_C->Write();
   hRateSingleTau_I->Write();
   hRateSingleTau_F->Write();
 
-  hRateDiTau->Write(); // Inclusive = C+I+F                                                                                                                       
+  hRateSingleTau_relIso->Write(); // Inclusive = C+I+F                                                                                                                   
+
+  hRateDiTau_all->Write(); // Inclusive = C+I+F                                                                                                                       
   hRateDiTau_C->Write();
   hRateDiTau_I->Write();
   hRateDiTau_F->Write();
 
-  hEffSingleTau->Write();  // Inclusive = C+I+F                                                                                                                   
+  hRateDiTau_relIso->Write(); // Inclusive = C+I+F                                                                                                                       
+
+  hEffSingleTau_all->Write();  // Inclusive = C+I+F                                                                                                                   
   hEffSingleTau_C->Write();
   hEffSingleTau_I->Write();
   hEffSingleTau_F->Write();
 
-  hEffDiTau->Write();  // Inclusive = C+I+F                                                                                                                       
+  hEffSingleTau_relIso->Write();  // Inclusive = C+I+F                                                                                                                   
+
+  hEffDiTau_all->Write();  // Inclusive = C+I+F                                                                                                                       
   hEffDiTau_C->Write();
   hEffDiTau_I->Write();
   hEffDiTau_F->Write();
 
+  hEffDiTau_relIso->Write();  // Inclusive = C+I+F                                                                                                                       
+  
+  // Write 2-D histograms
+  h_leadTrks_Phi_Eta->Write();
+  h_clustTrks_Phi_Eta->Write();
+  h_clustEGs_Et_Eta->Write();
+  h_clustEGs_Phi_Eta->Write();
+  h_clustEGs_counter->Write();
+
+
+  // Write the outfile
+  outFile->Write();
+
 }
 
 
@@ -811,6 +974,7 @@ double TkCalo::GetMatchingGenParticle(TTTrack track, GenParticle *genParticlePtr
   
   // For-loop: All hadronic GenTaus
   for (vector<GenParticle>::iterator tau = GenTausHadronic.begin(); tau != GenTausHadronic.end(); tau++) {
+  //for (vector<GenParticle>::iterator tau = GenTausTrigger.begin(); tau != GenTausTrigger.end(); tau++) {
       // If no hadronic decay products found (pi+/-, pi0, K+/-, K0, K0L), skip this tau
       if (tau->finalDaughtersCharged().size() < 1) continue;
       deltaR = auxTools_.DeltaR( track.getEta(), track.getPhi(), tau->eta(), tau->phi() );
diff --git a/NtupleAnalysis/src/TkCalo/TkCalo.h b/NtupleAnalysis/src/TkCalo/TkCalo.h
index c8dc0ff..d1cb429 100644
--- a/NtupleAnalysis/src/TkCalo/TkCalo.h
+++ b/NtupleAnalysis/src/TkCalo/TkCalo.h
@@ -165,6 +165,7 @@ class TkCalo : public TreeAnalyserMC{
   vector<L1TkEGParticle> TauCandidates;
   vector<L1TkEGParticle> TauCandidatesIsolated;
   vector<GenParticle> GenTausHadronic;
+  vector<GenParticle> GenTausTrigger;
 
   int nMaxNumOfHTausPossible;  
   bool bFoundAllTaus_;
@@ -195,48 +196,75 @@ class TkCalo : public TreeAnalyserMC{
   TH1D* h_trkClusters_PtResolution;
   TH1D* h_trkClusters_M;
 
+  TH1D* h_EGs_N;
+  TH1D* h_EGs_Et;
+  TH1D* h_EGs_Eta;
+  TH1D* h_EGs_Phi;
+  TH1D* h_EGs_IEta;
+  TH1D* h_EGs_IPhi;
+
+  TH1D* h_leadTrk_EG_dR;
+
+  TH1D* h_clustEGs_allEGs;
+  TH1D* h_clustEGs_passEt;
+  TH1D* h_clustEGs_passDRmax;
+  TH1D* h_clustEGs_passDRmin;
+  TH1D* h_clustEGs_passInvMass;
+
   TH1D* h_clustEGs_Et;
   TH1D* h_clustEGs_Eta;
   TH1D* h_clustEGs_Phi;
+  TH2D* h_clustEGs_Et_Eta;
   TH2D* h_clustEGs_Phi_Eta;
   TH1D* h_clustEGs_M;
 
-  TH2D* h_clustEGs_counter;
+  TH1D* h_clustEGs_counter;
   TH1D* h_EGClusters_MultiplicityPerCluster;
   TH1D* h_EGClusters_Et;
   TH1D* h_EGClusters_EtResolution;
   TH1D* h_EGClusters_M;
 
   TH1D* h_trkClusters_relIso;
-  
+
+  TH1D* hTkEG_matched_Et;
   TH1D* hTkEG_DeltaRmatch;
-  TH1D* hTkEG_VisEt;
+  TH1D* hTkEG_genVisEt;
   TH1D* hMcHadronicTau_VisEt;
+
+  TH1D* h_MCmatch_counters;
   
   TH1D* hTurnOn25_all;
   TH1D* hTurnOn25_relIso;
   TH1D* hTurnOn50_all;
   TH1D* hTurnOn50_relIso;
   
-  TH1D* hRateSingleTau; // Inclusive = C+I+F
+  TH1D* hRateSingleTau_all; // Inclusive = C+I+F
   TH1D* hRateSingleTau_C;
   TH1D* hRateSingleTau_I;
   TH1D* hRateSingleTau_F;
 
-  TH1D* hRateDiTau; // Inclusive = C+I+F
+  TH1D* hRateSingleTau_relIso; // Inclusive = C+I+F
+
+  TH1D* hRateDiTau_all; // Inclusive = C+I+F
   TH1D* hRateDiTau_C;
   TH1D* hRateDiTau_I;
   TH1D* hRateDiTau_F;
 
-  TH1D* hEffSingleTau;  // Inclusive = C+I+F
+  TH1D* hRateDiTau_relIso; // Inclusive = C+I+F
+
+  TH1D* hEffSingleTau_all;  // Inclusive = C+I+F
   TH1D* hEffSingleTau_C;
   TH1D* hEffSingleTau_I;
   TH1D* hEffSingleTau_F;
 
-  TH1D* hEffDiTau;  // Inclusive = C+I+F
+  TH1D* hEffSingleTau_relIso;  // Inclusive = C+I+F
+
+  TH1D* hEffDiTau_all;  // Inclusive = C+I+F
   TH1D* hEffDiTau_C;
   TH1D* hEffDiTau_I;
   TH1D* hEffDiTau_F;
+
+  TH1D* hEffDiTau_relIso;  // Inclusive = C+I+F
   
 };
 
diff --git a/NtupleAnalysis/src/TkCalo/work/json/DiTau_Eff.json b/NtupleAnalysis/src/TkCalo/work/json/DiTau_Eff.json
index 95f33e2..f6bf6e9 100644
--- a/NtupleAnalysis/src/TkCalo/work/json/DiTau_Eff.json
+++ b/NtupleAnalysis/src/TkCalo/work/json/DiTau_Eff.json
@@ -1,12 +1,13 @@
 {
     "analysis"         : "HLTausAnalysis",
     "dataEra"          : "ID2017",
-    "histograms"       : ["DiTau_Eff_Calo", "DiTau_Eff_Tk", "DiTau_Eff_VtxIso"],
+    "histograms"       : ["Eff_DiTau_all", "Eff_DiTau_RelIso"],
     "saveName"         : "DiTau_Eff",
     "saveFormats"      : [".png", ".pdf", ".C"],
     "saveDir"          : "plots",
     "datasets"         : ["TT_TuneCUETP8M1_14TeV_NoPU"],
-    "normalizationToOne": "False",
+    "normalizationToOne": "True",
+    
     "rebinX"           : 1,
     "xlabel"           : "Calo E_{T} (GeV)",
     "ylabel"           : "Efficiency / %.0f GeV",
@@ -28,7 +29,7 @@
     "gridY"            : "True",
     "cmsExtraText"     : "Phase-2 Simulation",
     "removeLegend"     : "False",
-    "moveLegend"       : {"dx": -0.05, "dy": 0.0, "dh": -0.15},
+    "moveLegend"       : {"dx": -0.15, "dy": 0.0, "dh": -0.15},
     "extraText"        : {"text": "", "x": 0.18, "y": 0.92, "size": 17},
     "cutValue"         : 20.0,
     "cutFillColour"    : 16,
diff --git a/NtupleAnalysis/src/TkCalo/work/json/Eff_SingleTau.json b/NtupleAnalysis/src/TkCalo/work/json/Eff_SingleTau.json
index a989619..b59aa34 100644
--- a/NtupleAnalysis/src/TkCalo/work/json/Eff_SingleTau.json
+++ b/NtupleAnalysis/src/TkCalo/work/json/Eff_SingleTau.json
@@ -1,39 +1,44 @@
 {
-    "analysis": "HLTausAnalysis",
-    "dataEra": "ID2017",
-    "histogram": "Eff_SingleTau",
-    "title": "Eff_SingleTau",
-    "saveFormats": [".png", ".pdf", ".C"],
-    "saveDir": "plots",
+    "analysis"         : "HLTausAnalysis",
+    "dataEra"          : "ID2017",
+    "histograms"       : ["Eff_SingleTau_all", "Eff_SingleTau_RelIso"],
     "saveName"         : "Eff_SingleTau",
-    "sample": "TT_TuneCUETP8M1_14TeV_PU140",
-    "normalization": "normalizeToOne",
-    "xlabel": "Track cluster p_{T} (GeV)",
-    "ylabel": "Efficiency / %.0f GeV",
-    "drawStyle": "HIST",
-    "legendStyle": "L",
+    "saveFormats"      : [".png", ".pdf", ".C"],
+    "saveDir"          : "plots",
+    "datasets"         : ["TT_TuneCUETP8M1_14TeV_PU140"],
+    "normalizationToOne": "False",
     "rebinX"           : 1,
-    "rebinY"           : 1,
-    "opts": {},
-    "opts2": {"ymin": 0.6, "ymax": 1.4},
+    "xlabel"           : "Calo E_{T} (GeV)",
+    "ylabel"           : "Efficiency / %.0f GeV",
+    "drawStyle"        : "HIST",
+    "legendStyle"      : "L",
+    "opts"             : {"xmin": 0.0, "xmax": 100.0, "ymin": 0.0, "ymax": 1.1},
+    "ratio"            : "False",
+    "ratioYlabel"      : "Ratio",
+    "ratioInvert"      : "False",
+    "ratioOpts"        : {"ymin": 0.0, "ymax": 1.4},
     "stackMCHistograms": "False",
-    "addCmsText": "True",
-    "addMCUncertainty": "False",
+    "addMCUncertainty" : "False",
     "addLuminosityText": "False",
-    "errorBarsX": "True",
-    "logY": "False",
-    "gridX": "True",
-    "gridY": "True",
-    "ratio": "False",
-    "ratioInvert": "False",
-    "ratioYlabel": "Ratio",
-    "cmsExtraText": "Phase-2 Simulation",
-    "removeLegend": "False",
-    "moveLegend": {"dx": -0.02, "dy": -0.05, "dh": -0.16},
-    "extraText": {"text": "", "x": 0.72, "y": 0.89, "size": 17},
-    "cutValue": 0.0,
-    "cutFillColour": 16,
-    "cutBox": "False",
-    "cutLine": "False",
-    "cutGreaterThan": "False"
+    "addCmsText"       : "True",
+    "errorBarsX"       : "True",
+    "logX"             : "False",
+    "logY"             : "False",
+    "gridX"            : "True",
+    "gridY"            : "True",
+    "cmsExtraText"     : "Phase-2 Simulation",
+    "removeLegend"     : "False",
+    "moveLegend"       : {"dx": -0.15, "dy": 0.0, "dh": -0.15},
+    "extraText"        : {"text": "", "x": 0.18, "y": 0.92, "size": 17},
+    "cutValue"         : 20.0,
+    "cutFillColour"    : 16,
+    "cutBox"           : "False",
+    "cutLine"          : "False",
+    "cutGreaterThan"   : "False",
+    "cutValueY"        : 0.5,
+    "cutFillColourY"   : 16,
+    "cutFillStyleY"    : 3001,
+    "cutBoxY"          : "False",
+    "cutLineY"         : "False",
+    "cutGreaterThanY"  : "True"
 }
diff --git a/NtupleAnalysis/src/TkCalo/work/json/Eff_SingleTau_old.json b/NtupleAnalysis/src/TkCalo/work/json/Eff_SingleTau_old.json
deleted file mode 100644
index 8c55093..0000000
--- a/NtupleAnalysis/src/TkCalo/work/json/Eff_SingleTau_old.json
+++ /dev/null
@@ -1,44 +0,0 @@
-{
-    "analysis"         : "HLTausAnalysis",
-    "dataEra"          : "ID2017",
-    "histograms"       : ["Eff_SingleTau"],
-    "saveName"         : "Eff_SingleTau",
-    "saveFormats"      : [".png", ".pdf", ".C"],
-    "saveDir"          : "plots",
-    "datasets"         : ["TT_TuneCUETP8M1_14TeV_PU140"],
-    "normalizationToOne": "False",
-    "rebinX"           : 1,
-    "xlabel"           : "Calo E_{T} (GeV)",
-    "ylabel"           : "Efficiency / %.0f GeV",
-    "drawStyle"        : "HIST",
-    "legendStyle"      : "L",
-    "opts"             : {"xmin": 0.0, "xmax": 100.0, "ymin": 0.0, "ymax": 1.1},
-    "ratio"            : "False",
-    "ratioYlabel"      : "Ratio",
-    "ratioInvert"      : "False",
-    "ratioOpts"        : {"ymin": 0.0, "ymax": 1.4},
-    "stackMCHistograms": "False",
-    "addMCUncertainty" : "False",
-    "addLuminosityText": "False",
-    "addCmsText"       : "True",
-    "errorBarsX"       : "True",
-    "logX"             : "False",
-    "logY"             : "False",
-    "gridX"            : "True",
-    "gridY"            : "True",
-    "cmsExtraText"     : "Phase-2 Simulation",
-    "removeLegend"     : "False",
-    "moveLegend"       : {"dx": -0.05, "dy": 0.0, "dh": -0.15},
-    "extraText"        : {"text": "", "x": 0.18, "y": 0.92, "size": 17},
-    "cutValue"         : 20.0,
-    "cutFillColour"    : 16,
-    "cutBox"           : "False",
-    "cutLine"          : "False",
-    "cutGreaterThan"   : "False",
-    "cutValueY"        : 0.5,
-    "cutFillColourY"   : 16,
-    "cutFillStyleY"    : 3001,
-    "cutBoxY"          : "False",
-    "cutLineY"         : "False",
-    "cutGreaterThanY"  : "True"
-}
diff --git a/NtupleAnalysis/src/TkCalo/work/json/TurnOn25.json b/NtupleAnalysis/src/TkCalo/work/json/TurnOn25.json
index d7cacab..a99bf76 100644
--- a/NtupleAnalysis/src/TkCalo/work/json/TurnOn25.json
+++ b/NtupleAnalysis/src/TkCalo/work/json/TurnOn25.json
@@ -1,7 +1,7 @@
 {
     "analysis"         : "HLTausAnalysis",
     "dataEra"          : "ID2017",
-    "histograms"       : ["Calo_TurnOn25", "Tk_TurnOn25", "VtxIso_TurnOn25"],
+    "histograms"       : ["TurnOn25_all", "TurnOn25_relIso"],
     "saveName"         : "TurnOn25",
     "saveFormats"      : [".png", ".pdf", ".C"],
     "saveDir"          : "plots",
@@ -28,7 +28,7 @@
     "gridY"            : "True",
     "cmsExtraText"     : "Phase-2 Simulation",
     "removeLegend"     : "False",
-    "moveLegend"       : {"dx": -0.05, "dy": 0.0, "dh": -0.15},
+    "moveLegend"       : {"dx": -0.15, "dy": 0.0, "dh": -0.15},
     "extraText"        : {"text": "", "x": 0.18, "y": 0.92, "size": 17},
     "cutValue"         : 25.0,
     "cutFillColour"    : 16,
diff --git a/NtupleAnalysis/src/TkCalo/work/json/TurnOn50.json b/NtupleAnalysis/src/TkCalo/work/json/TurnOn50.json
index 925c270..6b91c24 100644
--- a/NtupleAnalysis/src/TkCalo/work/json/TurnOn50.json
+++ b/NtupleAnalysis/src/TkCalo/work/json/TurnOn50.json
@@ -1,7 +1,7 @@
 {
     "analysis"         : "HLTausAnalysis",
     "dataEra"          : "ID2017",
-    "histograms"       : ["Calo_TurnOn50", "Tk_TurnOn50", "VtxIso_TurnOn50"],
+    "histograms"       : ["TurnOn50_all", "TurnOn50_relIso"],
     "saveName"         : "TurnOn50",
     "saveFormats"      : [".png", ".pdf", ".C"],
     "saveDir"          : "plots",
@@ -28,7 +28,7 @@
     "gridY"            : "True",
     "cmsExtraText"     : "Phase-2 Simulation",
     "removeLegend"     : "False",
-    "moveLegend"       : {"dx": -0.05, "dy": 0.0, "dh": -0.15},
+    "moveLegend"       : {"dx": -0.15, "dy": 0.0, "dh": -0.15},
     "extraText"        : {"text": "", "x": 0.18, "y": 0.92, "size": 17},
     "cutValue"         : 50.0,
     "cutFillColour"    : 16,
diff --git a/NtupleAnalysis/src/TkCalo/work/run.cc b/NtupleAnalysis/src/TkCalo/work/run.cc
index 2a40d4c..f1be4d1 100755
--- a/NtupleAnalysis/src/TkCalo/work/run.cc
+++ b/NtupleAnalysis/src/TkCalo/work/run.cc
@@ -25,9 +25,9 @@ void run(const std::string MulticrabDir = "",
   
   // Marina's files
   //const std::string absolutePath = "/afs/cern.ch/user/m/mtoumazo/workspace/multicrab";
-
+  const std::string absolutePath = "/eos/user/m/mtoumazo/";
   // Mikko's files
-  const std::string absolutePath = "/eos/user/m/mlotti/";
+  //const std::string absolutePath = "/eos/user/m/mlotti/";
 
   TkCalo macro(absolutePath + "/" + MulticrabDir, SampleName, text, maxEvents);
   macro.Loop();
diff --git a/Raw2TTree/crab.log b/Raw2TTree/crab.log
index 4952b49..e43fbbe 100644
--- a/Raw2TTree/crab.log
+++ b/Raw2TTree/crab.log
@@ -16,3 +16,2064 @@ Traceback (most recent call last):
   File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/lib/python2.7/site-packages/CRABClient/Commands/SubCommand.py", line 575, in validateOptions
     raise ConfigurationException(msg)
 ConfigurationException: [91mError[0m: /afs/cern.ch/user/m/mlotti/private/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/multicrab_NEW_v1015_20180623T1304/crab_TT_TuneCUETP8M2T4_14TeV_L1TPU140 is not a valid CRAB project directory.
+DEBUG 2018-06-26 22:05:52,169: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-26 22:05:52,169: 	 Could not find CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3; creating a new one.
+DEBUG 2018-06-26 22:05:52,193: 	 Checking credentials
+DEBUG 2018-06-26 22:05:52,194: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-26 22:05:52,194: 	 Getting proxy life time left
+DEBUG 2018-06-26 22:05:53,206: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43109
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:05:54,113: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43107
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:05:54,114: 	 Proxy valid for 11:58:29 hours
+DEBUG 2018-06-26 22:05:54,255: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:05:54,255: 	 Checking credentials
+DEBUG 2018-06-26 22:05:54,256: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-26 22:05:54,256: 	 Getting proxy life time left
+DEBUG 2018-06-26 22:05:55,266: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43107
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:05:56,385: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43105
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:05:56,386: 	 Proxy valid for 11:58:27 hours
+DEBUG 2018-06-26 22:05:57,506: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:05:57,507: 	 Command use: checkwrite
+DEBUG 2018-06-26 22:05:57,507: 	 Options use: ['--site', 'T2_CH_CERN']
+DEBUG 2018-06-26 22:05:57,507: 	 Instance is None
+DEBUG 2018-06-26 22:05:57,507: 	 Server base url is None
+DEBUG 2018-06-26 22:05:57,642: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_I9FFNs/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7fa5b7450c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_I9FFNs/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_I9FFNs/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7fa5b7450150>}, 'logger': <logging.Logger object at 0x7fa5b7450150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_I9FFNs/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-26 22:05:57,642: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-26 22:05:57,643: 	 Retrieving DN from proxy...
+INFO 2018-06-26 22:06:00,452: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-26 22:06:00,452: 	 Retrieving username from SiteDB...
+INFO 2018-06-26 22:06:05,380: 	 Username is: mtoumazo
+INFO 2018-06-26 22:06:05,381: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-26 22:06:05,381: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-26 22:06:05,411: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-26 22:06:05,412: 	 Will check write permission in /store/user/mtoumazo on site T2_CH_CERN
+DEBUG 2018-06-26 22:06:05,418: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T2_CH_CERN'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180626_220605/crab3checkwrite_20180626_220605.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-26 22:06:06,432: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180626_220605 and copy (dummy) file crab3checkwrite_20180626_220605.tmp to /store/user/mtoumazo
+
+INFO 2018-06-26 22:06:06,443: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_220605.tmp 'gsiftp://eoscmsftp.cern.ch//eos/cms/store/user/mtoumazo/crab3checkwrite_20180626_220605/crab3checkwrite_20180626_220605.tmp'
+INFO 2018-06-26 22:06:06,444: 	 Please wait...
+INFO 2018-06-26 22:06:07,881: 	 Failed running copy command
+INFO 2018-06-26 22:06:07,882: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_220605.tmp => gsiftp://eoscmsftp.cern.ch//eos/cms/store/user/mtoumazo/crab3checkwrite_20180626_220605/crab3checkwrite_20180626_220605.tmp
+    event: [1530043567830] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530043567830] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_220605.tmp => gsiftp://eoscmsftp.cern.ch//eos/cms/store/user/mtoumazo/crab3checkwrite_20180626_220605/crab3checkwrite_20180626_220605.tmp
+    event: [1530043567830] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    
+INFO 2018-06-26 22:06:07,882: 	   Stderr:
+    gfal-copy error: 13 (Permission denied) - globus_ftp_client: the server responded with an error 500 mkdir() fail : [ERROR] Error response: Permission denied   
+    
+INFO 2018-06-26 22:06:07,986: 	 
+Checkwrite Result:
+INFO 2018-06-26 22:06:07,987: 	 Error: Unable to write in /store/user/mtoumazo on site T2_CH_CERN
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-26 22:06:07,987: 	 Note: You cannot write to a site if you did not ask permission.
+INFO 2018-06-26 22:06:09,481: 	 Additional diagnostic info for CERN EOS
+== id ==>:
+uid=95947(mtoumazo) gid=1399(zh) groups=1399(zh),1092185763 context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
+== voms-proxy-info -all ==>:
+subject   : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou/CN=492003857
+issuer    : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+identity  : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+type      : RFC3820 compliant impersonation proxy
+strength  : 1024
+path      : /tmp/x509up_u95947
+timeleft  : 11:58:13
+key usage : Digital Signature, Key Encipherment
+=== VO cms extension information ===
+VO        : cms
+subject   : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+issuer    : /DC=ch/DC=cern/OU=computers/CN=lcg-voms2.cern.ch
+attribute : /cms/Role=NULL/Capability=NULL
+timeleft  : 11:58:12
+uri       : lcg-voms2.cern.ch:15002
+
+== uberftp eoscmsftp.cern.ch pwd ==>:
+220 eoscmsftp04.cern.ch GridFTP Server 12.5 (gcc64, 1517984806-85) [Globus Toolkit 6.0] ready.
+230 User mtoumazo logged in.
+/afs/cern.ch/user/m/mtoumazo
+
+DEBUG 2018-06-26 22:34:49,306: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-26 22:34:49,306: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-26 22:34:49,319: 	 Checking credentials
+DEBUG 2018-06-26 22:34:49,320: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-26 22:34:49,320: 	 Getting proxy life time left
+DEBUG 2018-06-26 22:34:50,227: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 41372
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:34:51,040: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 41371
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:34:51,040: 	 Proxy valid for 11:29:32 hours
+DEBUG 2018-06-26 22:34:51,153: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:34:51,153: 	 Checking credentials
+DEBUG 2018-06-26 22:34:51,153: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-26 22:34:51,153: 	 Getting proxy life time left
+DEBUG 2018-06-26 22:34:52,167: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 41370
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:34:53,080: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 41368
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:34:53,080: 	 Proxy valid for 11:29:30 hours
+DEBUG 2018-06-26 22:34:53,986: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:34:53,987: 	 Command use: checkwrite
+DEBUG 2018-06-26 22:34:53,987: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-26 22:34:53,987: 	 Instance is None
+DEBUG 2018-06-26 22:34:53,987: 	 Server base url is None
+DEBUG 2018-06-26 22:34:53,991: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_OsY5FH/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f72eec98c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_OsY5FH/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_OsY5FH/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f72eec98150>}, 'logger': <logging.Logger object at 0x7f72eec98150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_OsY5FH/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-26 22:34:53,991: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-26 22:34:53,992: 	 Retrieving DN from proxy...
+INFO 2018-06-26 22:34:56,076: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-26 22:34:56,077: 	 Retrieving username from SiteDB...
+INFO 2018-06-26 22:34:59,971: 	 Username is: mtoumazo
+INFO 2018-06-26 22:34:59,972: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-26 22:34:59,972: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-26 22:34:59,985: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-26 22:34:59,985: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-26 22:34:59,989: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180626_223459/crab3checkwrite_20180626_223459.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-26 22:35:01,220: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180626_223459 and copy (dummy) file crab3checkwrite_20180626_223459.tmp to /store/user/mtoumazo
+
+INFO 2018-06-26 22:35:01,227: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_223459.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459/crab3checkwrite_20180626_223459.tmp'
+INFO 2018-06-26 22:35:01,227: 	 Please wait...
+INFO 2018-06-26 22:35:02,680: 	 Failed running copy command
+INFO 2018-06-26 22:35:02,680: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_223459.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459/crab3checkwrite_20180626_223459.tmp
+    event: [1530045302144] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530045302144] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_223459.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459/crab3checkwrite_20180626_223459.tmp
+    event: [1530045302144] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530045302369] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-26 22:35:02,680: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180626_223459
+    
+    
+INFO 2018-06-26 22:35:02,828: 	 
+Checkwrite Result:
+INFO 2018-06-26 22:35:02,829: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-26 22:35:02,829: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-26 22:50:51,388: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-26 22:50:51,388: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-26 22:50:51,399: 	 Checking credentials
+DEBUG 2018-06-26 22:50:51,400: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-26 22:50:51,400: 	 Getting proxy life time left
+DEBUG 2018-06-26 22:50:52,519: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 40410
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:50:53,431: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 40408
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:50:53,432: 	 Proxy valid for 11:13:30 hours
+DEBUG 2018-06-26 22:50:53,545: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:50:53,545: 	 Checking credentials
+DEBUG 2018-06-26 22:50:53,547: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-26 22:50:53,547: 	 Getting proxy life time left
+DEBUG 2018-06-26 22:50:54,360: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 40408
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:50:55,178: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 40406
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:50:55,178: 	 Proxy valid for 11:13:28 hours
+DEBUG 2018-06-26 22:50:56,005: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-26 22:50:56,005: 	 Command use: checkwrite
+DEBUG 2018-06-26 22:50:56,005: 	 Options use: ['--site', 'T2_CH_CERN']
+DEBUG 2018-06-26 22:50:56,006: 	 Instance is None
+DEBUG 2018-06-26 22:50:56,006: 	 Server base url is None
+DEBUG 2018-06-26 22:50:56,011: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_ZDVuyA/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f0733db1c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_ZDVuyA/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_ZDVuyA/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f0733db1150>}, 'logger': <logging.Logger object at 0x7f0733db1150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_ZDVuyA/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-26 22:50:56,012: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-26 22:50:56,012: 	 Retrieving DN from proxy...
+INFO 2018-06-26 22:50:57,939: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-26 22:50:57,940: 	 Retrieving username from SiteDB...
+INFO 2018-06-26 22:51:02,160: 	 Username is: mtoumazo
+INFO 2018-06-26 22:51:02,161: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-26 22:51:02,161: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-26 22:51:02,176: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-26 22:51:02,177: 	 Will check write permission in /store/user/mtoumazo on site T2_CH_CERN
+DEBUG 2018-06-26 22:51:02,184: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T2_CH_CERN'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180626_225102/crab3checkwrite_20180626_225102.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-26 22:51:03,334: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180626_225102 and copy (dummy) file crab3checkwrite_20180626_225102.tmp to /store/user/mtoumazo
+
+INFO 2018-06-26 22:51:03,345: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_225102.tmp 'gsiftp://eoscmsftp.cern.ch//eos/cms/store/user/mtoumazo/crab3checkwrite_20180626_225102/crab3checkwrite_20180626_225102.tmp'
+INFO 2018-06-26 22:51:03,346: 	 Please wait...
+INFO 2018-06-26 22:51:04,136: 	 Failed running copy command
+INFO 2018-06-26 22:51:04,137: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_225102.tmp => gsiftp://eoscmsftp.cern.ch//eos/cms/store/user/mtoumazo/crab3checkwrite_20180626_225102/crab3checkwrite_20180626_225102.tmp
+    event: [1530046264091] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530046264091] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180626_225102.tmp => gsiftp://eoscmsftp.cern.ch//eos/cms/store/user/mtoumazo/crab3checkwrite_20180626_225102/crab3checkwrite_20180626_225102.tmp
+    event: [1530046264091] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    
+INFO 2018-06-26 22:51:04,137: 	   Stderr:
+    gfal-copy error: 13 (Permission denied) - globus_ftp_client: the server responded with an error 500 mkdir() fail : [ERROR] Error response: Permission denied   
+    
+INFO 2018-06-26 22:51:04,363: 	 
+Checkwrite Result:
+INFO 2018-06-26 22:51:04,363: 	 Error: Unable to write in /store/user/mtoumazo on site T2_CH_CERN
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-26 22:51:04,363: 	 Note: You cannot write to a site if you did not ask permission.
+INFO 2018-06-26 22:51:05,730: 	 Additional diagnostic info for CERN EOS
+== id ==>:
+uid=95947(mtoumazo) gid=1399(zh) groups=1399(zh),1092185763 context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
+== voms-proxy-info -all ==>:
+subject   : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou/CN=492003857
+issuer    : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+identity  : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+type      : RFC3820 compliant impersonation proxy
+strength  : 1024
+path      : /tmp/x509up_u95947
+timeleft  : 11:13:17
+key usage : Digital Signature, Key Encipherment
+=== VO cms extension information ===
+VO        : cms
+subject   : /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+issuer    : /DC=ch/DC=cern/OU=computers/CN=lcg-voms2.cern.ch
+attribute : /cms/Role=NULL/Capability=NULL
+timeleft  : 11:13:16
+uri       : lcg-voms2.cern.ch:15002
+
+== uberftp eoscmsftp.cern.ch pwd ==>:
+220 eoscmsftp06.cern.ch GridFTP Server 12.5 (gcc64, 1517984806-85) [Globus Toolkit 6.0] ready.
+230 User mtoumazo logged in.
+/afs/cern.ch/user/m/mtoumazo
+
+DEBUG 2018-06-27 08:23:45,410: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-27 08:23:45,411: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-27 08:23:45,467: 	 Checking credentials
+DEBUG 2018-06-27 08:23:45,469: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-27 08:23:45,469: 	 Getting proxy life time left
+DEBUG 2018-06-27 08:23:46,275: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43180
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:23:47,187: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43179
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:23:47,188: 	 Proxy valid for 11:59:40 hours
+DEBUG 2018-06-27 08:23:47,302: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:23:47,303: 	 Checking credentials
+DEBUG 2018-06-27 08:23:47,303: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-27 08:23:47,303: 	 Getting proxy life time left
+DEBUG 2018-06-27 08:23:48,717: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43178
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:23:49,530: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43177
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:23:49,530: 	 Proxy valid for 11:59:38 hours
+DEBUG 2018-06-27 08:23:50,338: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:23:50,339: 	 Command use: checkwrite
+DEBUG 2018-06-27 08:23:50,339: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-27 08:23:50,339: 	 Instance is None
+DEBUG 2018-06-27 08:23:50,339: 	 Server base url is None
+DEBUG 2018-06-27 08:23:50,343: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_OEkMQq/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f2f01ec5c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_OEkMQq/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_OEkMQq/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f2f01ec5150>}, 'logger': <logging.Logger object at 0x7f2f01ec5150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_OEkMQq/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-27 08:23:50,344: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-27 08:23:50,344: 	 Retrieving DN from proxy...
+INFO 2018-06-27 08:23:52,452: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-27 08:23:52,452: 	 Retrieving username from SiteDB...
+INFO 2018-06-27 08:23:56,790: 	 Username is: mtoumazo
+INFO 2018-06-27 08:23:56,791: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-27 08:23:56,791: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-27 08:23:56,810: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-27 08:23:56,810: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-27 08:23:56,834: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180627_082356/crab3checkwrite_20180627_082356.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-27 08:23:57,812: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180627_082356 and copy (dummy) file crab3checkwrite_20180627_082356.tmp to /store/user/mtoumazo
+
+INFO 2018-06-27 08:23:57,823: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180627_082356.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082356/crab3checkwrite_20180627_082356.tmp'
+INFO 2018-06-27 08:23:57,824: 	 Please wait...
+INFO 2018-06-27 08:27:28,378: 	 Failed running copy command
+INFO 2018-06-27 08:27:28,379: 	   Stderr:
+    Command timed out after 180 seconds!
+    
+INFO 2018-06-27 08:27:28,382: 	 
+Checkwrite Result:
+INFO 2018-06-27 08:27:28,382: 	 Unable to check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+Please try again later or contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-27 08:27:28,382: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-27 08:27:33,822: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-27 08:27:33,822: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-27 08:27:33,840: 	 Checking credentials
+DEBUG 2018-06-27 08:27:33,841: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-27 08:27:33,842: 	 Getting proxy life time left
+DEBUG 2018-06-27 08:27:34,849: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 42952
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:27:35,855: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 42951
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:27:35,855: 	 Proxy valid for 11:55:52 hours
+DEBUG 2018-06-27 08:27:35,972: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:27:35,973: 	 Checking credentials
+DEBUG 2018-06-27 08:27:35,973: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-27 08:27:35,973: 	 Getting proxy life time left
+DEBUG 2018-06-27 08:27:36,782: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 42950
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:27:37,591: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 42949
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:27:37,591: 	 Proxy valid for 11:55:50 hours
+DEBUG 2018-06-27 08:27:38,599: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 08:27:38,600: 	 Command use: checkwrite
+DEBUG 2018-06-27 08:27:38,600: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-27 08:27:38,600: 	 Instance is None
+DEBUG 2018-06-27 08:27:38,600: 	 Server base url is None
+DEBUG 2018-06-27 08:27:38,603: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_eazJ4M/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f7717b8ec90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_eazJ4M/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_eazJ4M/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f7717b8e150>}, 'logger': <logging.Logger object at 0x7f7717b8e150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_eazJ4M/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-27 08:27:38,603: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-27 08:27:38,604: 	 Retrieving DN from proxy...
+INFO 2018-06-27 08:27:40,436: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-27 08:27:40,437: 	 Retrieving username from SiteDB...
+INFO 2018-06-27 08:27:44,884: 	 Username is: mtoumazo
+INFO 2018-06-27 08:27:44,885: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-27 08:27:44,885: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-27 08:27:44,908: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-27 08:27:44,908: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-27 08:27:44,911: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180627_082744/crab3checkwrite_20180627_082744.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-27 08:27:45,872: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180627_082744 and copy (dummy) file crab3checkwrite_20180627_082744.tmp to /store/user/mtoumazo
+
+INFO 2018-06-27 08:27:45,877: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180627_082744.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744/crab3checkwrite_20180627_082744.tmp'
+INFO 2018-06-27 08:27:45,878: 	 Please wait...
+INFO 2018-06-27 08:28:39,206: 	 Failed running copy command
+INFO 2018-06-27 08:28:39,207: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180627_082744.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744/crab3checkwrite_20180627_082744.tmp
+    event: [1530080918629] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530080918629] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180627_082744.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744/crab3checkwrite_20180627_082744.tmp
+    event: [1530080918629] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530080918854] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-27 08:28:39,207: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_082744
+    
+    
+INFO 2018-06-27 08:28:39,209: 	 
+Checkwrite Result:
+INFO 2018-06-27 08:28:39,209: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-27 08:28:39,209: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-27 09:47:03,723: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-27 09:47:03,723: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-27 09:47:03,741: 	 Checking credentials
+DEBUG 2018-06-27 09:47:03,742: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-27 09:47:03,742: 	 Getting proxy life time left
+DEBUG 2018-06-27 09:47:04,952: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 38182
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 09:47:05,971: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 38181
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 09:47:05,971: 	 Proxy valid for 10:36:22 hours
+DEBUG 2018-06-27 09:47:06,085: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 09:47:06,085: 	 Checking credentials
+DEBUG 2018-06-27 09:47:06,086: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-27 09:47:06,086: 	 Getting proxy life time left
+DEBUG 2018-06-27 09:47:07,500: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 38179
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 09:47:08,414: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 38178
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 09:47:08,414: 	 Proxy valid for 10:36:19 hours
+DEBUG 2018-06-27 09:47:09,423: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-27 09:47:09,424: 	 Command use: checkwrite
+DEBUG 2018-06-27 09:47:09,424: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-27 09:47:09,424: 	 Instance is None
+DEBUG 2018-06-27 09:47:09,424: 	 Server base url is None
+DEBUG 2018-06-27 09:47:09,428: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_AQem0k/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f73058c9c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_AQem0k/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_AQem0k/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f73058c9150>}, 'logger': <logging.Logger object at 0x7f73058c9150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_AQem0k/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-27 09:47:09,428: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-27 09:47:09,428: 	 Retrieving DN from proxy...
+INFO 2018-06-27 09:47:11,653: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-27 09:47:11,654: 	 Retrieving username from SiteDB...
+INFO 2018-06-27 09:47:15,631: 	 Username is: mtoumazo
+INFO 2018-06-27 09:47:15,631: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-27 09:47:15,631: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-27 09:47:15,644: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-27 09:47:15,644: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-27 09:47:15,649: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180627_094715/crab3checkwrite_20180627_094715.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-27 09:47:16,856: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180627_094715 and copy (dummy) file crab3checkwrite_20180627_094715.tmp to /store/user/mtoumazo
+
+INFO 2018-06-27 09:47:16,863: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180627_094715.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715/crab3checkwrite_20180627_094715.tmp'
+INFO 2018-06-27 09:47:16,864: 	 Please wait...
+INFO 2018-06-27 09:48:35,714: 	 Failed running copy command
+INFO 2018-06-27 09:48:35,715: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180627_094715.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715/crab3checkwrite_20180627_094715.tmp
+    event: [1530085715176] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530085715177] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180627_094715.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715/crab3checkwrite_20180627_094715.tmp
+    event: [1530085715177] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530085715409] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-27 09:48:35,715: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180627_094715
+    
+    
+INFO 2018-06-27 09:48:35,717: 	 
+Checkwrite Result:
+INFO 2018-06-27 09:48:35,717: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-27 09:48:35,717: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-28 09:50:35,284: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-28 09:50:35,285: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-28 09:50:35,334: 	 Checking credentials
+DEBUG 2018-06-28 09:50:35,337: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 09:50:35,337: 	 Getting proxy life time left
+DEBUG 2018-06-28 09:50:36,961: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43009
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 09:50:38,179: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43007
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 09:50:38,179: 	 Proxy valid for 11:56:49 hours
+DEBUG 2018-06-28 09:50:38,299: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 09:50:38,299: 	 Checking credentials
+DEBUG 2018-06-28 09:50:38,299: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 09:50:38,300: 	 Getting proxy life time left
+DEBUG 2018-06-28 09:50:39,912: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43006
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 09:50:41,330: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43004
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 09:50:41,330: 	 Proxy valid for 11:56:46 hours
+DEBUG 2018-06-28 09:50:42,743: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 09:50:42,744: 	 Command use: checkwrite
+DEBUG 2018-06-28 09:50:42,744: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-28 09:50:42,744: 	 Instance is None
+DEBUG 2018-06-28 09:50:42,744: 	 Server base url is None
+DEBUG 2018-06-28 09:50:42,752: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_c1pNg9/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f27207a3c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_c1pNg9/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_c1pNg9/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f27207a3150>}, 'logger': <logging.Logger object at 0x7f27207a3150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_c1pNg9/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-28 09:50:42,753: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-28 09:50:42,753: 	 Retrieving DN from proxy...
+INFO 2018-06-28 09:50:45,418: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-28 09:50:45,420: 	 Retrieving username from SiteDB...
+INFO 2018-06-28 09:50:51,379: 	 Username is: mtoumazo
+INFO 2018-06-28 09:50:51,380: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-28 09:50:51,380: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-28 09:50:51,406: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-28 09:50:51,406: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-28 09:50:51,464: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180628_095051/crab3checkwrite_20180628_095051.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-28 09:50:52,503: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180628_095051 and copy (dummy) file crab3checkwrite_20180628_095051.tmp to /store/user/mtoumazo
+
+INFO 2018-06-28 09:50:52,516: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_095051.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051/crab3checkwrite_20180628_095051.tmp'
+INFO 2018-06-28 09:50:52,517: 	 Please wait...
+INFO 2018-06-28 09:50:54,315: 	 Failed running copy command
+INFO 2018-06-28 09:50:54,316: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_095051.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051/crab3checkwrite_20180628_095051.tmp
+    event: [1530172253749] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530172253749] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_095051.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051/crab3checkwrite_20180628_095051.tmp
+    event: [1530172253749] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530172253974] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-28 09:50:54,316: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_095051
+    
+    
+INFO 2018-06-28 09:50:54,417: 	 
+Checkwrite Result:
+INFO 2018-06-28 09:50:54,417: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-28 09:50:54,417: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-28 15:39:48,401: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-28 15:39:48,401: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-28 15:39:48,437: 	 Checking credentials
+DEBUG 2018-06-28 15:39:48,438: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 15:39:48,438: 	 Getting proxy life time left
+DEBUG 2018-06-28 15:39:50,650: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43177
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 15:39:51,764: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43175
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 15:39:51,765: 	 Proxy valid for 11:59:37 hours
+DEBUG 2018-06-28 15:39:51,879: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 15:39:51,879: 	 Checking credentials
+DEBUG 2018-06-28 15:39:51,879: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 15:39:51,879: 	 Getting proxy life time left
+DEBUG 2018-06-28 15:39:53,209: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43174
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 15:39:54,331: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43172
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 15:39:54,331: 	 Proxy valid for 11:59:34 hours
+DEBUG 2018-06-28 15:39:55,540: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 15:39:55,540: 	 Command use: checkwrite
+DEBUG 2018-06-28 15:39:55,540: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-28 15:39:55,540: 	 Instance is None
+DEBUG 2018-06-28 15:39:55,541: 	 Server base url is None
+DEBUG 2018-06-28 15:39:55,566: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_jLzjQ8/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f893165dc90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_jLzjQ8/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_jLzjQ8/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f893165d150>}, 'logger': <logging.Logger object at 0x7f893165d150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_jLzjQ8/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-28 15:39:55,566: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-28 15:39:55,567: 	 Retrieving DN from proxy...
+INFO 2018-06-28 15:39:58,692: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-28 15:39:58,692: 	 Retrieving username from SiteDB...
+INFO 2018-06-28 15:40:04,355: 	 Username is: mtoumazo
+INFO 2018-06-28 15:40:04,355: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-28 15:40:04,355: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-28 15:40:04,393: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-28 15:40:04,393: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-28 15:40:04,398: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180628_154004/crab3checkwrite_20180628_154004.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-28 15:40:05,864: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180628_154004 and copy (dummy) file crab3checkwrite_20180628_154004.tmp to /store/user/mtoumazo
+
+INFO 2018-06-28 15:40:05,872: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_154004.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004/crab3checkwrite_20180628_154004.tmp'
+INFO 2018-06-28 15:40:05,872: 	 Please wait...
+INFO 2018-06-28 15:40:07,829: 	 Failed running copy command
+INFO 2018-06-28 15:40:07,829: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_154004.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004/crab3checkwrite_20180628_154004.tmp
+    event: [1530193207282] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530193207282] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_154004.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004/crab3checkwrite_20180628_154004.tmp
+    event: [1530193207283] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530193207507] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-28 15:40:07,829: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_154004
+    
+    
+INFO 2018-06-28 15:40:07,955: 	 
+Checkwrite Result:
+INFO 2018-06-28 15:40:07,955: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-28 15:40:07,956: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-28 16:47:10,311: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-28 16:47:10,312: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-28 16:47:10,343: 	 Checking credentials
+DEBUG 2018-06-28 16:47:10,345: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:47:10,345: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:47:11,467: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 39136
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:47:12,476: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 39134
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:47:12,476: 	 Proxy valid for 10:52:16 hours
+DEBUG 2018-06-28 16:47:12,594: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:47:12,594: 	 Checking credentials
+DEBUG 2018-06-28 16:47:12,595: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:47:12,595: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:47:13,604: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 39134
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:47:14,614: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 39132
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:47:14,614: 	 Proxy valid for 10:52:14 hours
+DEBUG 2018-06-28 16:47:15,528: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:47:15,528: 	 Command use: checkwrite
+DEBUG 2018-06-28 16:47:15,528: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-28 16:47:15,528: 	 Instance is None
+DEBUG 2018-06-28 16:47:15,528: 	 Server base url is None
+DEBUG 2018-06-28 16:47:15,589: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_h3jsvg/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7fe61797cc90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_h3jsvg/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_h3jsvg/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7fe61797c150>}, 'logger': <logging.Logger object at 0x7fe61797c150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_h3jsvg/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-28 16:47:15,589: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-28 16:47:15,589: 	 Retrieving DN from proxy...
+INFO 2018-06-28 16:47:18,132: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-28 16:47:18,132: 	 Retrieving username from SiteDB...
+INFO 2018-06-28 16:47:22,802: 	 Username is: mtoumazo
+INFO 2018-06-28 16:47:22,803: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-28 16:47:22,803: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-28 16:47:22,824: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-28 16:47:22,824: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-28 16:47:22,830: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180628_164722/crab3checkwrite_20180628_164722.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-28 16:47:23,829: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180628_164722 and copy (dummy) file crab3checkwrite_20180628_164722.tmp to /store/user/mtoumazo
+
+INFO 2018-06-28 16:47:23,835: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_164722.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722/crab3checkwrite_20180628_164722.tmp'
+INFO 2018-06-28 16:47:23,836: 	 Please wait...
+INFO 2018-06-28 16:47:25,325: 	 Failed running copy command
+INFO 2018-06-28 16:47:25,326: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_164722.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722/crab3checkwrite_20180628_164722.tmp
+    event: [1530197244788] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530197244788] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_164722.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722/crab3checkwrite_20180628_164722.tmp
+    event: [1530197244789] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530197245015] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-28 16:47:25,326: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164722
+    
+    
+INFO 2018-06-28 16:47:25,410: 	 
+Checkwrite Result:
+INFO 2018-06-28 16:47:25,410: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-28 16:47:25,410: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-28 16:48:08,391: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-28 16:48:08,392: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-28 16:48:08,402: 	 Checking credentials
+DEBUG 2018-06-28 16:48:08,403: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:48:08,403: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:48:09,518: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 39078
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:48:10,428: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 39076
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:48:10,429: 	 Proxy valid for 10:51:18 hours
+DEBUG 2018-06-28 16:48:10,551: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:48:10,551: 	 Checking credentials
+DEBUG 2018-06-28 16:48:10,551: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:48:10,551: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:48:11,472: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 39076
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:48:12,380: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 39074
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:48:12,381: 	 Proxy valid for 10:51:16 hours
+DEBUG 2018-06-28 16:48:13,289: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:48:13,290: 	 Command use: checkwrite
+DEBUG 2018-06-28 16:48:13,290: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-28 16:48:13,290: 	 Instance is None
+DEBUG 2018-06-28 16:48:13,290: 	 Server base url is None
+DEBUG 2018-06-28 16:48:13,295: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_FR2XTX/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f40bc81dc90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_FR2XTX/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_FR2XTX/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f40bc81d150>}, 'logger': <logging.Logger object at 0x7f40bc81d150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_FR2XTX/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-28 16:48:13,295: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-28 16:48:13,295: 	 Retrieving DN from proxy...
+INFO 2018-06-28 16:48:15,852: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-28 16:48:15,852: 	 Retrieving username from SiteDB...
+INFO 2018-06-28 16:48:20,243: 	 Username is: mtoumazo
+INFO 2018-06-28 16:48:20,243: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-28 16:48:20,243: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-28 16:48:20,256: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-28 16:48:20,256: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-28 16:48:20,262: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180628_164820/crab3checkwrite_20180628_164820.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-28 16:48:21,421: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180628_164820 and copy (dummy) file crab3checkwrite_20180628_164820.tmp to /store/user/mtoumazo
+
+INFO 2018-06-28 16:48:21,435: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_164820.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820/crab3checkwrite_20180628_164820.tmp'
+INFO 2018-06-28 16:48:21,435: 	 Please wait...
+INFO 2018-06-28 16:48:22,985: 	 Failed running copy command
+INFO 2018-06-28 16:48:22,985: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_164820.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820/crab3checkwrite_20180628_164820.tmp
+    event: [1530197302440] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530197302440] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_164820.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820/crab3checkwrite_20180628_164820.tmp
+    event: [1530197302440] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530197302669] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-28 16:48:22,985: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_164820
+    
+    
+INFO 2018-06-28 16:48:23,080: 	 
+Checkwrite Result:
+INFO 2018-06-28 16:48:23,080: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-28 16:48:23,080: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-28 16:49:55,381: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-28 16:49:55,382: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-28 16:49:55,396: 	 Checking credentials
+DEBUG 2018-06-28 16:49:55,397: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:49:55,397: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:49:57,105: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43190
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:49:58,314: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43189
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:49:58,315: 	 Proxy valid for 11:59:50 hours
+DEBUG 2018-06-28 16:49:58,427: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:49:58,428: 	 Checking credentials
+DEBUG 2018-06-28 16:49:58,428: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:49:58,428: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:49:59,335: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43188
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:50:00,442: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43187
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:50:00,442: 	 Proxy valid for 11:59:48 hours
+DEBUG 2018-06-28 16:50:01,449: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:50:01,450: 	 Command use: checkwrite
+DEBUG 2018-06-28 16:50:01,450: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-28 16:50:01,450: 	 Instance is None
+DEBUG 2018-06-28 16:50:01,450: 	 Server base url is None
+DEBUG 2018-06-28 16:50:01,456: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_gmKZRb/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7ff925997c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_gmKZRb/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_gmKZRb/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7ff925997150>}, 'logger': <logging.Logger object at 0x7ff925997150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_gmKZRb/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-28 16:50:01,456: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-28 16:50:01,456: 	 Retrieving DN from proxy...
+INFO 2018-06-28 16:50:03,713: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-28 16:50:03,713: 	 Retrieving username from SiteDB...
+INFO 2018-06-28 16:50:08,499: 	 Username is: mtoumazo
+INFO 2018-06-28 16:50:08,500: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-28 16:50:08,500: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-28 16:50:08,534: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-28 16:50:08,534: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-28 16:50:08,540: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180628_165008/crab3checkwrite_20180628_165008.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-28 16:50:09,726: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180628_165008 and copy (dummy) file crab3checkwrite_20180628_165008.tmp to /store/user/mtoumazo
+
+INFO 2018-06-28 16:50:09,731: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_165008.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008/crab3checkwrite_20180628_165008.tmp'
+INFO 2018-06-28 16:50:09,731: 	 Please wait...
+INFO 2018-06-28 16:50:11,242: 	 Failed running copy command
+INFO 2018-06-28 16:50:11,242: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_165008.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008/crab3checkwrite_20180628_165008.tmp
+    event: [1530197410692] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530197410693] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_165008.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008/crab3checkwrite_20180628_165008.tmp
+    event: [1530197410693] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530197410918] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-28 16:50:11,242: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165008
+    
+    
+INFO 2018-06-28 16:50:11,324: 	 
+Checkwrite Result:
+INFO 2018-06-28 16:50:11,324: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-28 16:50:11,324: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-28 16:58:00,490: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-28 16:58:00,490: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-28 16:58:00,507: 	 Checking credentials
+DEBUG 2018-06-28 16:58:00,508: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:58:00,508: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:58:01,723: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 42706
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:58:02,831: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 42705
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:58:02,832: 	 Proxy valid for 11:51:46 hours
+DEBUG 2018-06-28 16:58:02,946: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:58:02,946: 	 Checking credentials
+DEBUG 2018-06-28 16:58:02,947: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-28 16:58:02,947: 	 Getting proxy life time left
+DEBUG 2018-06-28 16:58:04,062: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 42703
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:58:05,098: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 42703
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:58:05,098: 	 Proxy valid for 11:51:43 hours
+DEBUG 2018-06-28 16:58:06,118: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-28 16:58:06,118: 	 Command use: checkwrite
+DEBUG 2018-06-28 16:58:06,118: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-28 16:58:06,118: 	 Instance is None
+DEBUG 2018-06-28 16:58:06,118: 	 Server base url is None
+DEBUG 2018-06-28 16:58:06,122: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_jLUXG1/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f62f8b35c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_jLUXG1/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_jLUXG1/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f62f8b35150>}, 'logger': <logging.Logger object at 0x7f62f8b35150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_jLUXG1/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-28 16:58:06,122: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-28 16:58:06,123: 	 Retrieving DN from proxy...
+INFO 2018-06-28 16:58:08,733: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-28 16:58:08,734: 	 Retrieving username from SiteDB...
+INFO 2018-06-28 16:58:13,245: 	 Username is: mtoumazo
+INFO 2018-06-28 16:58:13,245: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-28 16:58:13,245: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-28 16:58:13,269: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-28 16:58:13,269: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-28 16:58:13,273: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180628_165813/crab3checkwrite_20180628_165813.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-28 16:58:14,436: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180628_165813 and copy (dummy) file crab3checkwrite_20180628_165813.tmp to /store/user/mtoumazo
+
+INFO 2018-06-28 16:58:14,443: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_165813.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813/crab3checkwrite_20180628_165813.tmp'
+INFO 2018-06-28 16:58:14,444: 	 Please wait...
+INFO 2018-06-28 16:58:15,958: 	 Failed running copy command
+INFO 2018-06-28 16:58:15,958: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_165813.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813/crab3checkwrite_20180628_165813.tmp
+    event: [1530197895411] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530197895411] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180628_165813.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813/crab3checkwrite_20180628_165813.tmp
+    event: [1530197895411] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530197895635] BOTH   SRM	PREPARE:ENTER	
+    
+INFO 2018-06-28 16:58:15,958: 	   Stderr:
+    WARNING Transfer failed with: DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813
+    
+    gfal-copy error: 5 (Input/output error) - DESTINATION MAKE_PARENT srm-ifce err: Input/output error, err: [SE][Mkdir][SRM_FAILURE] httpg://cmseos.fnal.gov:8443/srm/v2/server: srm://cmseos.fnal.gov/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813: Error:/bin/mkdir: cannot create directory `/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813': Operation not permitted
+    Ref-u uscms7247  /bin/mkdir /eos/uscms/store/user/mtoumazo/crab3checkwrite_20180628_165813
+    
+    
+INFO 2018-06-28 16:58:16,045: 	 
+Checkwrite Result:
+INFO 2018-06-28 16:58:16,045: 	 Error: Unable to write in /store/user/mtoumazo on site T3_US_FNALLPC
+       You may want to contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-28 16:58:16,045: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-06-29 10:09:02,825: 	 Executing command: 'checkwrite'
+DEBUG 2018-06-29 10:09:02,826: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-06-29 10:09:02,862: 	 Checking credentials
+DEBUG 2018-06-29 10:09:02,863: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-29 10:09:02,863: 	 Getting proxy life time left
+DEBUG 2018-06-29 10:09:03,680: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43185
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-29 10:09:04,387: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43184
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-29 10:09:04,387: 	 Proxy valid for 11:59:45 hours
+DEBUG 2018-06-29 10:09:04,504: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-29 10:09:04,504: 	 Checking credentials
+DEBUG 2018-06-29 10:09:04,505: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-06-29 10:09:04,505: 	 Getting proxy life time left
+DEBUG 2018-06-29 10:09:05,214: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43183
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-29 10:09:05,921: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43183
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-29 10:09:05,921: 	 Proxy valid for 11:59:43 hours
+DEBUG 2018-06-29 10:09:06,626: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-06-29 10:09:06,627: 	 Command use: checkwrite
+DEBUG 2018-06-29 10:09:06,627: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-06-29 10:09:06,627: 	 Instance is None
+DEBUG 2018-06-29 10:09:06,627: 	 Server base url is None
+DEBUG 2018-06-29 10:09:06,666: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_zxUH0m/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f6d0c8bcc90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_zxUH0m/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_zxUH0m/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f6d0c8bc150>}, 'logger': <logging.Logger object at 0x7f6d0c8bc150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_zxUH0m/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-06-29 10:09:06,667: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-06-29 10:09:06,667: 	 Retrieving DN from proxy...
+INFO 2018-06-29 10:09:08,373: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-06-29 10:09:08,374: 	 Retrieving username from SiteDB...
+INFO 2018-06-29 10:09:11,871: 	 Username is: mtoumazo
+INFO 2018-06-29 10:09:11,872: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-06-29 10:09:11,872: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-06-29 10:09:11,884: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-06-29 10:09:11,884: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-06-29 10:09:11,932: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp'], 'protocol': 'srmv2'}
+INFO 2018-06-29 10:09:12,906: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180629_100911 and copy (dummy) file crab3checkwrite_20180629_100911.tmp to /store/user/mtoumazo
+
+INFO 2018-06-29 10:09:12,910: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180629_100911.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp'
+INFO 2018-06-29 10:09:12,911: 	 Please wait...
+INFO 2018-06-29 10:09:18,817: 	 Failed running copy command
+INFO 2018-06-29 10:09:18,818: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180629_100911.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp
+    event: [1530259753861] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530259753861] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180629_100911.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp
+    event: [1530259753861] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530259754088] BOTH   SRM	PREPARE:ENTER	
+    event: [1530259754480] DEST   GFAL2::PLUGINS::SRM	SRM:PUT	Got TURL srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp => gsiftp://cmseos32.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp
+    event: [1530259754480] BOTH   SRM	PREPARE:EXIT	
+    event: [1530259754480] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530259754480] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180629_100911.tmp => gsiftp://cmseos32.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp
+    event: [1530259754480] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530259754480] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:ENTER	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180629_100911.tmp => gsiftp://cmseos32.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp
+    event: [1530259754480] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:TYPE	streamed
+    
+INFO 2018-06-29 10:09:18,818: 	   Stderr:
+    WARNING Transfer failed with: globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp; No space left on device    
+    WARNING Got an error when canceling the PUT request: SRMv2 abort request error : 
+    gfal-copy error: 70 (Communication error on send) - globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180629_100911/crab3checkwrite_20180629_100911.tmp; No space left on device    
+    
+INFO 2018-06-29 10:09:18,877: 	 
+Checkwrite Result:
+INFO 2018-06-29 10:09:18,877: 	 Unable to check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+Please try again later or contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-06-29 10:09:18,877: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-07-02 09:51:11,456: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-02 09:51:11,457: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-02 09:51:11,476: 	 Checking credentials
+DEBUG 2018-07-02 09:51:11,476: 	 Proxy file /tmp/x509up_u95947 not found
+DEBUG 2018-07-02 09:51:11,476: 	 Creating new proxy for 24:00 hours with VO group '' and VO role 'NULL'.
+DEBUG 2018-07-02 09:51:19,199: 	 Executing : 
+ command : voms-proxy-init -voms cms:/cms -valid 24:00 -rfc
+ output : None
+ error: None
+ retcode : 0
+DEBUG 2018-07-02 09:51:20,008: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 86399
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:51:20,815: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 86397
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:51:21,622: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:51:21,622: 	 Proxy created.
+DEBUG 2018-07-02 09:51:21,735: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:51:21,735: 	 Checking credentials
+DEBUG 2018-07-02 09:51:21,738: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 09:51:21,738: 	 Getting proxy life time left
+DEBUG 2018-07-02 09:51:22,544: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 86396
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:51:23,250: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 86394
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:51:23,251: 	 Proxy valid for 23:59:56 hours
+DEBUG 2018-07-02 09:51:23,957: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:51:23,958: 	 Command use: checkwrite
+DEBUG 2018-07-02 09:51:23,958: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-07-02 09:51:23,958: 	 Instance is None
+DEBUG 2018-07-02 09:51:23,958: 	 Server base url is None
+DEBUG 2018-07-02 09:51:23,964: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_eGERNi/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7ff9c691fd10>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_eGERNi/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_eGERNi/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7ff9c691f150>}, 'logger': <logging.Logger object at 0x7ff9c691f150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_eGERNi/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-02 09:51:23,964: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-07-02 09:51:23,965: 	 Retrieving DN from proxy...
+INFO 2018-07-02 09:51:25,899: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-02 09:51:25,900: 	 Retrieving username from SiteDB...
+INFO 2018-07-02 09:51:29,495: 	 Username is: mtoumazo
+INFO 2018-07-02 09:51:29,495: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-07-02 09:51:29,495: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-07-02 09:51:29,508: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-07-02 09:51:29,509: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-02 09:51:29,512: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp'], 'protocol': 'srmv2'}
+INFO 2018-07-02 09:51:30,526: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180702_095129 and copy (dummy) file crab3checkwrite_20180702_095129.tmp to /store/user/mtoumazo
+
+INFO 2018-07-02 09:51:30,535: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_095129.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp'
+INFO 2018-07-02 09:51:30,535: 	 Please wait...
+INFO 2018-07-02 09:51:35,391: 	 Failed running copy command
+INFO 2018-07-02 09:51:35,391: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_095129.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp
+    event: [1530517891649] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530517891649] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_095129.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp
+    event: [1530517891649] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530517891873] BOTH   SRM	PREPARE:ENTER	
+    event: [1530517892279] DEST   GFAL2::PLUGINS::SRM	SRM:PUT	Got TURL srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp => gsiftp://cmseos45.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp
+    event: [1530517892279] BOTH   SRM	PREPARE:EXIT	
+    event: [1530517892279] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530517892279] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_095129.tmp => gsiftp://cmseos45.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp
+    event: [1530517892279] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530517892279] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:ENTER	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_095129.tmp => gsiftp://cmseos45.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp
+    event: [1530517892279] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:TYPE	streamed
+    
+INFO 2018-07-02 09:51:35,391: 	   Stderr:
+    WARNING Transfer failed with: globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp; No space left on device    
+    WARNING Got an error when canceling the PUT request: SRMv2 abort request error : 
+    gfal-copy error: 70 (Communication error on send) - globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180702_095129/crab3checkwrite_20180702_095129.tmp; No space left on device    
+    
+INFO 2018-07-02 09:51:35,472: 	 
+Checkwrite Result:
+INFO 2018-07-02 09:51:35,472: 	 Unable to check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+Please try again later or contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-07-02 09:51:35,473: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-07-02 09:52:34,598: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-02 09:52:34,598: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-02 09:52:34,610: 	 Checking credentials
+DEBUG 2018-07-02 09:52:34,611: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 09:52:34,611: 	 Getting proxy life time left
+DEBUG 2018-07-02 09:52:35,416: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 86323
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:52:36,223: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 86321
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:52:36,223: 	 Proxy valid for 23:58:43 hours
+DEBUG 2018-07-02 09:52:36,334: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:52:36,334: 	 Checking credentials
+DEBUG 2018-07-02 09:52:36,334: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 09:52:36,334: 	 Getting proxy life time left
+DEBUG 2018-07-02 09:52:37,141: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 86321
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:52:38,048: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 86320
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:52:38,048: 	 Proxy valid for 23:58:41 hours
+DEBUG 2018-07-02 09:52:38,760: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:52:38,761: 	 Command use: checkwrite
+DEBUG 2018-07-02 09:52:38,761: 	 Options use: ['--site', 'T3_US_FNALLPC', '--lfn=/store/user/toumazou']
+DEBUG 2018-07-02 09:52:38,761: 	 Instance is None
+DEBUG 2018-07-02 09:52:38,761: 	 Server base url is None
+DEBUG 2018-07-02 09:52:38,765: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_zdJsIc/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f4ae5527d10>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_zdJsIc/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_zdJsIc/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f4ae5527190>}, 'logger': <logging.Logger object at 0x7f4ae5527190>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_zdJsIc/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-02 09:52:38,765: 	 Validating LFN /store/user/toumazou...
+INFO 2018-07-02 09:52:38,765: 	 Retrieving DN from proxy...
+INFO 2018-07-02 09:52:40,592: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-02 09:52:40,592: 	 Retrieving username from SiteDB...
+INFO 2018-07-02 09:52:44,109: 	 Username is: mtoumazo
+INFO 2018-07-02 09:52:44,109: 	 Refusing to check write permission in /store/user/toumazou, because this is not an allowed LFN for stageout.
+The LFN must start with either '/store/user/<username>/' or '/store/group/<groupname>/' (or '/store/local/<something>/' if publication is off), where username is your username as registered in SiteDB (i.e. the username of your CERN primary account).
+LFN /store/user/toumazou is not valid.
+DEBUG 2018-07-02 09:53:01,572: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-02 09:53:01,572: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-02 09:53:01,580: 	 Checking credentials
+DEBUG 2018-07-02 09:53:01,580: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 09:53:01,580: 	 Getting proxy life time left
+DEBUG 2018-07-02 09:53:02,385: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 86296
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:53:03,192: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 86294
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:53:03,192: 	 Proxy valid for 23:58:16 hours
+DEBUG 2018-07-02 09:53:03,304: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:53:03,305: 	 Checking credentials
+DEBUG 2018-07-02 09:53:03,305: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 09:53:03,305: 	 Getting proxy life time left
+DEBUG 2018-07-02 09:53:04,117: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 86294
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:53:04,924: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 86293
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:53:04,925: 	 Proxy valid for 23:58:14 hours
+DEBUG 2018-07-02 09:53:05,752: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 09:53:05,752: 	 Command use: checkwrite
+DEBUG 2018-07-02 09:53:05,752: 	 Options use: ['--site', 'T3_US_FNALLPC', '--lfn=/store/user/toumazou/']
+DEBUG 2018-07-02 09:53:05,752: 	 Instance is None
+DEBUG 2018-07-02 09:53:05,752: 	 Server base url is None
+DEBUG 2018-07-02 09:53:05,760: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_uP87dX/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7fd676d01d10>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_uP87dX/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_uP87dX/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7fd676d01190>}, 'logger': <logging.Logger object at 0x7fd676d01190>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_uP87dX/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-02 09:53:05,760: 	 Validating LFN /store/user/toumazou/...
+INFO 2018-07-02 09:53:05,760: 	 Retrieving DN from proxy...
+INFO 2018-07-02 09:53:07,558: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-02 09:53:07,559: 	 Retrieving username from SiteDB...
+INFO 2018-07-02 09:53:11,184: 	 Username is: mtoumazo
+INFO 2018-07-02 09:53:11,185: 	 Refusing to check write permission in /store/user/toumazou/, because this is not an allowed LFN for stageout.
+The LFN must start with either '/store/user/<username>/' or '/store/group/<groupname>/' (or '/store/local/<something>/' if publication is off), where username is your username as registered in SiteDB (i.e. the username of your CERN primary account).
+LFN /store/user/toumazou/ is not valid.
+DEBUG 2018-07-02 21:49:46,380: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-02 21:49:46,382: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-02 21:49:46,426: 	 Checking credentials
+DEBUG 2018-07-02 21:49:46,429: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 21:49:46,429: 	 Getting proxy life time left
+DEBUG 2018-07-02 21:49:48,037: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43180
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:49:49,647: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43178
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:49:49,648: 	 Proxy valid for 11:59:40 hours
+DEBUG 2018-07-02 21:49:49,762: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:49:49,762: 	 Checking credentials
+DEBUG 2018-07-02 21:49:49,763: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 21:49:49,763: 	 Getting proxy life time left
+DEBUG 2018-07-02 21:49:51,370: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43176
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:49:52,979: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43175
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:49:52,979: 	 Proxy valid for 11:59:36 hours
+DEBUG 2018-07-02 21:49:54,592: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:49:54,593: 	 Command use: checkwrite
+DEBUG 2018-07-02 21:49:54,593: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-07-02 21:49:54,593: 	 Instance is None
+DEBUG 2018-07-02 21:49:54,593: 	 Server base url is None
+DEBUG 2018-07-02 21:49:54,604: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_plNPm_/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f7ede6f3c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_plNPm_/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_plNPm_/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f7ede6f3150>}, 'logger': <logging.Logger object at 0x7f7ede6f3150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_plNPm_/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-02 21:49:54,604: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-07-02 21:49:54,604: 	 Retrieving DN from proxy...
+INFO 2018-07-02 21:49:58,369: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-02 21:49:58,370: 	 Retrieving username from SiteDB...
+INFO 2018-07-02 21:50:05,476: 	 Username is: mtoumazo
+INFO 2018-07-02 21:50:05,476: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-07-02 21:50:05,477: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-07-02 21:50:05,493: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-07-02 21:50:05,494: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-02 21:50:05,500: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp'], 'protocol': 'srmv2'}
+INFO 2018-07-02 21:50:07,094: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180702_215005 and copy (dummy) file crab3checkwrite_20180702_215005.tmp to /store/user/mtoumazo
+
+INFO 2018-07-02 21:50:07,100: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_215005.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp'
+INFO 2018-07-02 21:50:07,101: 	 Please wait...
+INFO 2018-07-02 21:50:12,061: 	 Failed running copy command
+INFO 2018-07-02 21:50:12,062: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_215005.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp
+    event: [1530561008302] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530561008302] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_215005.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp
+    event: [1530561008302] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530561008531] BOTH   SRM	PREPARE:ENTER	
+    event: [1530561009546] DEST   GFAL2::PLUGINS::SRM	SRM:PUT	Got TURL srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp => gsiftp://cmseos34.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp
+    event: [1530561009546] BOTH   SRM	PREPARE:EXIT	
+    event: [1530561009546] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530561009546] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_215005.tmp => gsiftp://cmseos34.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp
+    event: [1530561009546] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530561009547] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:ENTER	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180702_215005.tmp => gsiftp://cmseos34.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp
+    event: [1530561009547] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:TYPE	streamed
+    
+INFO 2018-07-02 21:50:12,062: 	   Stderr:
+    WARNING Transfer failed with: globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp; No space left on device    
+    WARNING Got an error when canceling the PUT request: SRMv2 abort request error : 
+    gfal-copy error: 70 (Communication error on send) - globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180702_215005/crab3checkwrite_20180702_215005.tmp; No space left on device    
+    
+INFO 2018-07-02 21:50:12,158: 	 
+Checkwrite Result:
+INFO 2018-07-02 21:50:12,158: 	 Unable to check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+Please try again later or contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-07-02 21:50:12,159: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-07-02 21:50:46,010: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-02 21:50:46,011: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-02 21:50:46,028: 	 Checking credentials
+DEBUG 2018-07-02 21:50:46,030: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 21:50:46,030: 	 Getting proxy life time left
+DEBUG 2018-07-02 21:50:47,841: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43120
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:50:49,452: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43118
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:50:49,453: 	 Proxy valid for 11:58:40 hours
+DEBUG 2018-07-02 21:50:49,568: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:50:49,568: 	 Checking credentials
+DEBUG 2018-07-02 21:50:49,571: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-02 21:50:49,571: 	 Getting proxy life time left
+DEBUG 2018-07-02 21:50:51,286: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43116
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:50:52,898: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43115
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:50:52,899: 	 Proxy valid for 11:58:36 hours
+DEBUG 2018-07-02 21:50:54,509: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-02 21:50:54,509: 	 Command use: checkwrite
+DEBUG 2018-07-02 21:50:54,509: 	 Options use: ['--site', 'T3_US_FNALLPC', '--lfn=/store/user/toumazou/']
+DEBUG 2018-07-02 21:50:54,510: 	 Instance is None
+DEBUG 2018-07-02 21:50:54,510: 	 Server base url is None
+DEBUG 2018-07-02 21:50:54,520: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_Wt1poP/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f6417e19d10>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_Wt1poP/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_Wt1poP/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f6417e19190>}, 'logger': <logging.Logger object at 0x7f6417e19190>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_Wt1poP/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-02 21:50:54,520: 	 Validating LFN /store/user/toumazou/...
+INFO 2018-07-02 21:50:54,521: 	 Retrieving DN from proxy...
+INFO 2018-07-02 21:50:58,677: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-02 21:50:58,677: 	 Retrieving username from SiteDB...
+INFO 2018-07-02 21:51:05,756: 	 Username is: mtoumazo
+INFO 2018-07-02 21:51:05,757: 	 Refusing to check write permission in /store/user/toumazou/, because this is not an allowed LFN for stageout.
+The LFN must start with either '/store/user/<username>/' or '/store/group/<groupname>/' (or '/store/local/<something>/' if publication is off), where username is your username as registered in SiteDB (i.e. the username of your CERN primary account).
+LFN /store/user/toumazou/ is not valid.
+DEBUG 2018-07-02 21:51:23,435: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-02 21:51:23,436: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-03 16:47:08,603: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-03 16:47:08,604: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-03 16:47:08,618: 	 Checking credentials
+DEBUG 2018-07-03 16:47:08,618: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-03 16:47:08,618: 	 Getting proxy life time left
+DEBUG 2018-07-03 16:47:09,226: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43180
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 16:47:09,832: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43180
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 16:47:09,832: 	 Proxy valid for 11:59:40 hours
+DEBUG 2018-07-03 16:47:09,940: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 16:47:09,940: 	 Checking credentials
+DEBUG 2018-07-03 16:47:09,941: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-03 16:47:09,941: 	 Getting proxy life time left
+DEBUG 2018-07-03 16:47:10,545: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43179
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 16:47:11,152: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43178
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 16:47:11,152: 	 Proxy valid for 11:59:39 hours
+DEBUG 2018-07-03 16:47:11,757: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 16:47:11,758: 	 Command use: checkwrite
+DEBUG 2018-07-03 16:47:11,758: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-07-03 16:47:11,758: 	 Instance is None
+DEBUG 2018-07-03 16:47:11,758: 	 Server base url is None
+DEBUG 2018-07-03 16:47:11,787: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_zjA61t/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f682bc74c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_zjA61t/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_zjA61t/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f682bc74150>}, 'logger': <logging.Logger object at 0x7f682bc74150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_zjA61t/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-03 16:47:11,787: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-07-03 16:47:11,787: 	 Retrieving DN from proxy...
+INFO 2018-07-03 16:47:13,273: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-03 16:47:13,273: 	 Retrieving username from SiteDB...
+INFO 2018-07-03 16:47:16,351: 	 Username is: mtoumazo
+INFO 2018-07-03 16:47:16,351: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-07-03 16:47:16,351: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-07-03 16:47:16,398: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-07-03 16:47:16,398: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-03 16:47:16,412: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp'], 'protocol': 'srmv2'}
+INFO 2018-07-03 16:47:17,330: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180703_164716 and copy (dummy) file crab3checkwrite_20180703_164716.tmp to /store/user/mtoumazo
+
+INFO 2018-07-03 16:47:17,334: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_164716.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp'
+INFO 2018-07-03 16:47:17,334: 	 Please wait...
+INFO 2018-07-03 16:47:21,211: 	 Failed running copy command
+INFO 2018-07-03 16:47:21,211: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_164716.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp
+    event: [1530629238270] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530629238270] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_164716.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp
+    event: [1530629238270] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530629238494] BOTH   SRM	PREPARE:ENTER	
+    event: [1530629238885] DEST   GFAL2::PLUGINS::SRM	SRM:PUT	Got TURL srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp => gsiftp://cmseos38.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp
+    event: [1530629238885] BOTH   SRM	PREPARE:EXIT	
+    event: [1530629238885] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530629238885] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_164716.tmp => gsiftp://cmseos38.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp
+    event: [1530629238885] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530629238885] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:ENTER	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_164716.tmp => gsiftp://cmseos38.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp
+    event: [1530629238885] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:TYPE	streamed
+    
+INFO 2018-07-03 16:47:21,211: 	   Stderr:
+    WARNING Transfer failed with: globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp; No space left on device    
+    WARNING Got an error when canceling the PUT request: SRMv2 abort request error : 
+    gfal-copy error: 70 (Communication error on send) - globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180703_164716/crab3checkwrite_20180703_164716.tmp; No space left on device    
+    
+INFO 2018-07-03 16:47:21,321: 	 
+Checkwrite Result:
+INFO 2018-07-03 16:47:21,321: 	 Unable to check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+Please try again later or contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-07-03 16:47:21,321: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-07-03 17:44:49,260: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-03 17:44:49,320: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-03 17:44:49,382: 	 Checking credentials
+DEBUG 2018-07-03 17:44:49,382: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-03 17:44:49,382: 	 Getting proxy life time left
+DEBUG 2018-07-03 17:44:50,090: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43185
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 17:44:50,796: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43185
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 17:44:50,796: 	 Proxy valid for 11:59:45 hours
+DEBUG 2018-07-03 17:44:50,904: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 17:44:50,904: 	 Checking credentials
+DEBUG 2018-07-03 17:44:50,905: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-03 17:44:50,905: 	 Getting proxy life time left
+DEBUG 2018-07-03 17:44:51,509: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43184
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 17:44:52,113: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43183
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 17:44:52,114: 	 Proxy valid for 11:59:44 hours
+DEBUG 2018-07-03 17:44:52,718: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-03 17:44:52,718: 	 Command use: checkwrite
+DEBUG 2018-07-03 17:44:52,718: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-07-03 17:44:52,718: 	 Instance is None
+DEBUG 2018-07-03 17:44:52,718: 	 Server base url is None
+DEBUG 2018-07-03 17:44:52,736: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_54wlM3/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7ffae59f1c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_54wlM3/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_54wlM3/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7ffae59f1150>}, 'logger': <logging.Logger object at 0x7ffae59f1150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_54wlM3/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-03 17:44:52,736: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-07-03 17:44:52,736: 	 Retrieving DN from proxy...
+INFO 2018-07-03 17:44:54,216: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-03 17:44:54,216: 	 Retrieving username from SiteDB...
+INFO 2018-07-03 17:44:57,248: 	 Username is: mtoumazo
+INFO 2018-07-03 17:44:57,248: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-07-03 17:44:57,249: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-07-03 17:44:57,262: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-07-03 17:44:57,263: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-03 17:44:57,330: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp'], 'protocol': 'srmv2'}
+INFO 2018-07-03 17:44:58,408: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180703_174457 and copy (dummy) file crab3checkwrite_20180703_174457.tmp to /store/user/mtoumazo
+
+INFO 2018-07-03 17:44:58,412: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_174457.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp'
+INFO 2018-07-03 17:44:58,413: 	 Please wait...
+INFO 2018-07-03 17:45:02,804: 	 Failed running copy command
+INFO 2018-07-03 17:45:02,805: 	   Stdout:
+    Copying 85 bytes file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_174457.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp
+    event: [1530632699378] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530632699378] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_174457.tmp => srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp
+    event: [1530632699378] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530632699639] BOTH   SRM	PREPARE:ENTER	
+    event: [1530632700065] DEST   GFAL2::PLUGINS::SRM	SRM:PUT	Got TURL srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp => gsiftp://cmseos44.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp
+    event: [1530632700065] BOTH   SRM	PREPARE:EXIT	
+    event: [1530632700065] BOTH   GFAL2:CORE:COPY	LIST:ENTER	
+    event: [1530632700065] BOTH   GFAL2:CORE:COPY	LIST:ITEM	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_174457.tmp => gsiftp://cmseos44.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp
+    event: [1530632700066] BOTH   GFAL2:CORE:COPY	LIST:EXIT	
+    event: [1530632700066] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:ENTER	file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180703_174457.tmp => gsiftp://cmseos44.fnal.gov//eos/uscms/store/user/mtoumazo/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp
+    event: [1530632700066] BOTH   GFAL2:CORE:COPY:LOCAL	TRANSFER:TYPE	streamed
+    
+INFO 2018-07-03 17:45:02,805: 	   Stderr:
+    WARNING Transfer failed with: globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp; No space left on device    
+    WARNING Got an error when canceling the PUT request: SRMv2 abort request error : 
+    gfal-copy error: 70 (Communication error on send) - globus_ftp_client: the server responded with an error 500 Command failed. : open/create : [ERROR] Server responded with an error: [3009] Unable to get quota space - quota not defined or exhausted /eos/uscms/store/user/toumazou/crab3checkwrite_20180703_174457/crab3checkwrite_20180703_174457.tmp; No space left on device    
+    
+INFO 2018-07-03 17:45:02,860: 	 
+Checkwrite Result:
+INFO 2018-07-03 17:45:02,860: 	 Unable to check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+Please try again later or contact the site administrators sending them the 'crab checkwrite' output as printed above.
+INFO 2018-07-03 17:45:02,860: 	 Note: You cannot write to a site if you did not ask permission.
+DEBUG 2018-07-04 08:36:57,630: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-04 08:36:57,634: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-04 08:36:57,672: 	 Checking credentials
+DEBUG 2018-07-04 08:36:57,673: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-04 08:36:57,673: 	 Getting proxy life time left
+DEBUG 2018-07-04 08:36:58,680: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43184
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 08:36:59,496: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43183
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 08:36:59,497: 	 Proxy valid for 11:59:44 hours
+DEBUG 2018-07-04 08:36:59,614: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 08:36:59,614: 	 Checking credentials
+DEBUG 2018-07-04 08:36:59,615: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-04 08:36:59,615: 	 Getting proxy life time left
+DEBUG 2018-07-04 08:37:01,434: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43181
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 08:37:02,249: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43180
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 08:37:02,249: 	 Proxy valid for 11:59:41 hours
+DEBUG 2018-07-04 08:37:03,166: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 08:37:03,166: 	 Command use: checkwrite
+DEBUG 2018-07-04 08:37:03,166: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-07-04 08:37:03,166: 	 Instance is None
+DEBUG 2018-07-04 08:37:03,166: 	 Server base url is None
+DEBUG 2018-07-04 08:37:03,172: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_KI7Vba/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f2cb4753c90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_KI7Vba/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_KI7Vba/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f2cb4753150>}, 'logger': <logging.Logger object at 0x7f2cb4753150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_KI7Vba/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-04 08:37:03,172: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-07-04 08:37:03,173: 	 Retrieving DN from proxy...
+INFO 2018-07-04 08:37:05,025: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-04 08:37:05,026: 	 Retrieving username from SiteDB...
+INFO 2018-07-04 08:37:08,677: 	 Username is: mtoumazo
+INFO 2018-07-04 08:37:08,677: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-07-04 08:37:08,677: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-07-04 08:37:08,705: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-07-04 08:37:08,706: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-04 08:37:08,785: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180704_083708/crab3checkwrite_20180704_083708.tmp'], 'protocol': 'srmv2'}
+INFO 2018-07-04 08:37:09,822: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180704_083708 and copy (dummy) file crab3checkwrite_20180704_083708.tmp to /store/user/mtoumazo
+
+INFO 2018-07-04 08:37:09,828: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180704_083708.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_083708/crab3checkwrite_20180704_083708.tmp'
+INFO 2018-07-04 08:37:09,829: 	 Please wait...
+INFO 2018-07-04 08:37:14,274: 	 
+Successfully created directory crab3checkwrite_20180704_083708 and copied file crab3checkwrite_20180704_083708.tmp to /store/user/mtoumazo
+INFO 2018-07-04 08:37:14,274: 	 
+Attempting to delete file srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_083708/crab3checkwrite_20180704_083708.tmp
+
+INFO 2018-07-04 08:37:14,275: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-rm -v -t 180 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_083708/crab3checkwrite_20180704_083708.tmp'
+INFO 2018-07-04 08:37:14,275: 	 Please wait...
+INFO 2018-07-04 08:37:15,225: 	 
+Successfully deleted file srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_083708/crab3checkwrite_20180704_083708.tmp
+INFO 2018-07-04 08:37:15,225: 	 
+Attempting to delete directory srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_083708/
+
+INFO 2018-07-04 08:37:15,225: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-rm -r -v -t 180 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_083708/'
+INFO 2018-07-04 08:37:15,225: 	 Please wait...
+INFO 2018-07-04 08:37:16,540: 	 
+Successfully deleted directory srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_083708/
+INFO 2018-07-04 08:37:16,568: 	 
+Checkwrite Result:
+INFO 2018-07-04 08:37:16,568: 	 Success: Able to write in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-04 09:34:04,258: 	 Executing command: 'checkwrite'
+DEBUG 2018-07-04 09:34:04,259: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-04 09:34:04,274: 	 Checking credentials
+DEBUG 2018-07-04 09:34:04,275: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-04 09:34:04,275: 	 Getting proxy life time left
+DEBUG 2018-07-04 09:34:05,194: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43180
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 09:34:06,105: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43179
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 09:34:06,105: 	 Proxy valid for 11:59:40 hours
+DEBUG 2018-07-04 09:34:06,217: 	 Executing : 
+ command : openssl x509 -in ~/.globus/usercert.pem -subject -noout
+ output : subject= /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 09:34:06,218: 	 Checking credentials
+DEBUG 2018-07-04 09:34:06,218: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-04 09:34:06,218: 	 Getting proxy life time left
+DEBUG 2018-07-04 09:34:07,125: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 43178
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 09:34:07,932: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 43178
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 09:34:07,932: 	 Proxy valid for 11:59:38 hours
+DEBUG 2018-07-04 09:34:08,747: 	 Executing : 
+ command : env X509_USER_PROXY=/tmp/x509up_u95947 voms-proxy-info -fqan
+ output : /cms/Role=NULL/Capability=NULL
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-04 09:34:08,748: 	 Command use: checkwrite
+DEBUG 2018-07-04 09:34:08,748: 	 Options use: ['--site', 'T3_US_FNALLPC']
+DEBUG 2018-07-04 09:34:08,748: 	 Instance is None
+DEBUG 2018-07-04 09:34:08,748: 	 Server base url is None
+DEBUG 2018-07-04 09:34:08,780: 	 Service initialised ({'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'key': '/tmp/x509up_u95947', 'maxcachereuse': 24.0, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_Hhlmuf/cmsweb.cern.ch', 'inputdata': {}, 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'service_name': 'PhEDEx', 'requests': {'content_type': 'application/x-www-form-urlencoded', 'cacheduration': 0, 'host': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'accept_type': 'text/html', 'key': '/tmp/x509up_u95947', 'deleteCacheOnExit': <WMCore.Services.Requests.TempDirectory object at 0x7f4ce62bcc90>, 'endpoint_components': ParseResult(scheme='https', netloc='cmsweb.cern.ch', path='/phedex/datasvc/json/prod/', params='', query='', fragment=''), 'endpoint': 'https://cmsweb.cern.ch/phedex/datasvc/json/prod/', 'pycurl': True, 'cachepath': '/tmp/mtoumazo/.wmcore_cache_Hhlmuf/cmsweb.cern.ch', 'cert': '/tmp/x509up_u95947', 'timeout': 300, 'req_cache_path': '/tmp/mtoumazo/.wmcore_cache_Hhlmuf/cmsweb.cern.ch/.cache', 'logger': <logging.Logger object at 0x7f4ce62bc150>}, 'logger': <logging.Logger object at 0x7f4ce62bc150>, 'cacheduration': 0, 'method': None, 'pycurl': True}):
+	 host: cmsweb.cern.ch, basepath: https://cmsweb.cern.ch/phedex/datasvc/json/prod/ (text/html)
+	 cache: /tmp/mtoumazo/.wmcore_cache_Hhlmuf/cmsweb.cern.ch (duration 0 hours, max reuse 24.0 hours)
+INFO 2018-07-04 09:34:08,781: 	 Will check write permission in the default location /store/user/<username>
+INFO 2018-07-04 09:34:08,781: 	 Retrieving DN from proxy...
+INFO 2018-07-04 09:34:10,691: 	 DN is: /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=mtoumazo/CN=806500/CN=Marina Toumazou
+INFO 2018-07-04 09:34:10,691: 	 Retrieving username from SiteDB...
+INFO 2018-07-04 09:34:14,639: 	 Username is: mtoumazo
+INFO 2018-07-04 09:34:14,640: 	 Validating LFN /store/user/mtoumazo...
+INFO 2018-07-04 09:34:14,640: 	 LFN /store/user/mtoumazo is valid.
+INFO 2018-07-04 09:34:14,669: 	 Will use `gfal-copy`, `gfal-rm` commands for checking write permissions
+INFO 2018-07-04 09:34:14,670: 	 Will check write permission in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-04 09:34:14,674: 	 getData: 
+	url: lfn2pfn
+	data: {'node': ['T3_US_FNALLPC'], 'custodial': 'n', 'lfn': ['/store/user/mtoumazo/crab3checkwrite_20180704_093414/crab3checkwrite_20180704_093414.tmp'], 'protocol': 'srmv2'}
+INFO 2018-07-04 09:34:15,868: 	 
+Attempting to create (dummy) directory crab3checkwrite_20180704_093414 and copy (dummy) file crab3checkwrite_20180704_093414.tmp to /store/user/mtoumazo
+
+INFO 2018-07-04 09:34:15,906: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-copy -p -v -t 180 file:///afs/cern.ch/work/m/mtoumazo/scratch0/CMSSW_10_1_5/src/HLTausAnalysis/Raw2TTree/crab3checkwrite_20180704_093414.tmp 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_093414/crab3checkwrite_20180704_093414.tmp'
+INFO 2018-07-04 09:34:15,907: 	 Please wait...
+INFO 2018-07-04 09:34:20,199: 	 
+Successfully created directory crab3checkwrite_20180704_093414 and copied file crab3checkwrite_20180704_093414.tmp to /store/user/mtoumazo
+INFO 2018-07-04 09:34:20,200: 	 
+Attempting to delete file srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_093414/crab3checkwrite_20180704_093414.tmp
+
+INFO 2018-07-04 09:34:20,200: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-rm -v -t 180 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_093414/crab3checkwrite_20180704_093414.tmp'
+INFO 2018-07-04 09:34:20,200: 	 Please wait...
+INFO 2018-07-04 09:34:21,301: 	 
+Successfully deleted file srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_093414/crab3checkwrite_20180704_093414.tmp
+INFO 2018-07-04 09:34:21,302: 	 
+Attempting to delete directory srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_093414/
+
+INFO 2018-07-04 09:34:21,302: 	 Executing command: which scram >/dev/null 2>&1 && eval `scram unsetenv -sh`; gfal-rm -r -v -t 180 'srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_093414/'
+INFO 2018-07-04 09:34:21,302: 	 Please wait...
+INFO 2018-07-04 09:34:22,681: 	 
+Successfully deleted directory srm://cmseos.fnal.gov:8443/srm/v2/server?SFN=/eos/uscms/store/user/mtoumazo/crab3checkwrite_20180704_093414/
+INFO 2018-07-04 09:34:22,683: 	 
+Checkwrite Result:
+INFO 2018-07-04 09:34:22,683: 	 Success: Able to write in /store/user/mtoumazo on site T3_US_FNALLPC
+DEBUG 2018-07-30 14:34:18,613: 	 Executing command: 'submit'
+DEBUG 2018-07-30 14:34:18,614: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-30 14:34:18,656: 	 Checking credentials
+DEBUG 2018-07-30 14:34:18,657: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-30 14:34:18,657: 	 Getting proxy life time left
+DEBUG 2018-07-30 14:34:19,564: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 42540
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-30 14:34:21,279: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 42537
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-30 14:34:21,279: 	 Proxy valid for 11:49:00 hours
+INFO 2018-07-30 14:34:21,279: 	 Will use CRAB configuration file multicrab_NEW_v1015_25ns_20180730T1433/crabConfig_RelValSingleTauFlatPt2To100_pythia8_PU25ns_93X_upgrade2023_realistic_v5_2023D17PU200_93X.py
+DEBUG 2018-07-30 14:34:21,280: 	 Loading CRAB configuration file.
+DEBUG 2018-07-30 14:34:21,283: 	 Will use CRAB Analysis plugin (i.e. will run an analysis job type).
+ERROR 2018-07-30 14:34:21,283: 	 Invalid CRAB configuration: Parameter Data.inputDBS has an invalid value ('93Xmc').
+Allowed values are: 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader')
+                    'phys02' ('https://cmsweb.cern.ch/dbs/prod/phys02/DBSReader')
+                    'phys03' ('https://cmsweb.cern.ch/dbs/prod/phys03/DBSReader')
+                    'phys01' ('https://cmsweb.cern.ch/dbs/prod/phys01/DBSReader')
+If Data.inputDBS would not be specified, the default 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader') would be used.
+The documentation about the CRAB configuration file can be found in https://twiki.cern.ch/twiki/bin/view/CMSPublic/CRAB3ConfigurationFile
+ERROR 2018-07-30 14:34:21,284: 	 Caught exception
+Traceback (most recent call last):
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/bin/crab", line 160, in <module>
+    client()
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/bin/crab", line 146, in __call__
+    self.cmd = sub_cmd(self.logger, args[1:])
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/lib/python2.7/site-packages/CRABClient/Commands/submit.py", line 34, in __init__
+    SubCommand.__init__(self, logger, cmdargs, disable_interspersed_args=True)
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/lib/python2.7/site-packages/CRABClient/Commands/SubCommand.py", line 303, in __init__
+    self.loadConfig(self.options.config, self.args)
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/lib/python2.7/site-packages/CRABClient/Commands/SubCommand.py", line 89, in loadConfig
+    raise ConfigurationException(configmsg)
+ConfigurationException: Invalid CRAB configuration: Parameter Data.inputDBS has an invalid value ('93Xmc').
+Allowed values are: 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader')
+                    'phys02' ('https://cmsweb.cern.ch/dbs/prod/phys02/DBSReader')
+                    'phys03' ('https://cmsweb.cern.ch/dbs/prod/phys03/DBSReader')
+                    'phys01' ('https://cmsweb.cern.ch/dbs/prod/phys01/DBSReader')
+If Data.inputDBS would not be specified, the default 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader') would be used.
+The documentation about the CRAB configuration file can be found in https://twiki.cern.ch/twiki/bin/view/CMSPublic/CRAB3ConfigurationFile
+DEBUG 2018-07-30 14:34:26,528: 	 Executing command: 'submit'
+DEBUG 2018-07-30 14:34:26,528: 	 Found CRAB cache file /afs/cern.ch/user/m/mtoumazo/.crab3
+DEBUG 2018-07-30 14:34:26,536: 	 Checking credentials
+DEBUG 2018-07-30 14:34:26,537: 	 Found proxy file /tmp/x509up_u95947
+DEBUG 2018-07-30 14:34:26,537: 	 Getting proxy life time left
+DEBUG 2018-07-30 14:34:27,447: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -timeleft
+ output : 42532
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-30 14:34:28,255: 	 Executing : 
+ command : voms-proxy-info -file /tmp/x509up_u95947 -actimeleft
+ output : 42530
+
+ error: 
+ retcode : 0
+DEBUG 2018-07-30 14:34:28,255: 	 Proxy valid for 11:48:52 hours
+INFO 2018-07-30 14:34:28,256: 	 Will use CRAB configuration file multicrab_NEW_v1015_25ns_20180730T1433/crabConfig_RelValSingleTauFlatPt2To100_pythia8_93X_upgrade2023_realistic_v5_2023D17noPU_93X.py
+DEBUG 2018-07-30 14:34:28,256: 	 Loading CRAB configuration file.
+DEBUG 2018-07-30 14:34:28,260: 	 Will use CRAB Analysis plugin (i.e. will run an analysis job type).
+ERROR 2018-07-30 14:34:28,260: 	 Invalid CRAB configuration: Parameter Data.inputDBS has an invalid value ('93Xmc').
+Allowed values are: 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader')
+                    'phys02' ('https://cmsweb.cern.ch/dbs/prod/phys02/DBSReader')
+                    'phys03' ('https://cmsweb.cern.ch/dbs/prod/phys03/DBSReader')
+                    'phys01' ('https://cmsweb.cern.ch/dbs/prod/phys01/DBSReader')
+If Data.inputDBS would not be specified, the default 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader') would be used.
+The documentation about the CRAB configuration file can be found in https://twiki.cern.ch/twiki/bin/view/CMSPublic/CRAB3ConfigurationFile
+ERROR 2018-07-30 14:34:28,260: 	 Caught exception
+Traceback (most recent call last):
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/bin/crab", line 160, in <module>
+    client()
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/bin/crab", line 146, in __call__
+    self.cmd = sub_cmd(self.logger, args[1:])
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/lib/python2.7/site-packages/CRABClient/Commands/submit.py", line 34, in __init__
+    SubCommand.__init__(self, logger, cmdargs, disable_interspersed_args=True)
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/lib/python2.7/site-packages/CRABClient/Commands/SubCommand.py", line 303, in __init__
+    self.loadConfig(self.options.config, self.args)
+  File "/cvmfs/cms.cern.ch/crab3/slc6_amd64_gcc493/cms/crabclient/3.3.1805.patch1/lib/python2.7/site-packages/CRABClient/Commands/SubCommand.py", line 89, in loadConfig
+    raise ConfigurationException(configmsg)
+ConfigurationException: Invalid CRAB configuration: Parameter Data.inputDBS has an invalid value ('93Xmc').
+Allowed values are: 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader')
+                    'phys02' ('https://cmsweb.cern.ch/dbs/prod/phys02/DBSReader')
+                    'phys03' ('https://cmsweb.cern.ch/dbs/prod/phys03/DBSReader')
+                    'phys01' ('https://cmsweb.cern.ch/dbs/prod/phys01/DBSReader')
+If Data.inputDBS would not be specified, the default 'global' ('https://cmsweb.cern.ch/dbs/prod/global/DBSReader') would be used.
+The documentation about the CRAB configuration file can be found in https://twiki.cern.ch/twiki/bin/view/CMSPublic/CRAB3ConfigurationFile
diff --git a/Raw2TTree/python/__init__.py b/Raw2TTree/python/__init__.py
index eb04749..884f3a8 100644
--- a/Raw2TTree/python/__init__.py
+++ b/Raw2TTree/python/__init__.py
@@ -1,3 +1,3 @@
 #Automatically created by SCRAM
 import os
-__path__.append(os.path.dirname(os.path.abspath(__file__).rsplit('/HLTausAnalysis/Raw2TTree/',1)[0])+'/cfipython/slc6_amd64_gcc530/HLTausAnalysis/Raw2TTree')
+__path__.append(os.path.dirname(os.path.abspath(__file__).rsplit('/HLTausAnalysis/Raw2TTree/',1)[0])+'/cfipython/slc6_amd64_gcc630/HLTausAnalysis/Raw2TTree')
diff --git a/Raw2TTree/python/__init__.pyc b/Raw2TTree/python/__init__.pyc
index 0547d15..11820c5 100644
Binary files a/Raw2TTree/python/__init__.pyc and b/Raw2TTree/python/__init__.pyc differ
diff --git a/Raw2TTree/python/tools/HChDataVersion.pyc b/Raw2TTree/python/tools/HChDataVersion.pyc
index ebea5e1..14764fc 100644
Binary files a/Raw2TTree/python/tools/HChDataVersion.pyc and b/Raw2TTree/python/tools/HChDataVersion.pyc differ
diff --git a/Raw2TTree/python/tools/HChOptions.pyc b/Raw2TTree/python/tools/HChOptions.pyc
index 439cf9b..9e74749 100644
Binary files a/Raw2TTree/python/tools/HChOptions.pyc and b/Raw2TTree/python/tools/HChOptions.pyc differ
diff --git a/Raw2TTree/python/tools/__init__.pyc b/Raw2TTree/python/tools/__init__.pyc
index e375f4d..f55e617 100644
Binary files a/Raw2TTree/python/tools/__init__.pyc and b/Raw2TTree/python/tools/__init__.pyc differ
diff --git a/Raw2TTree/python/tools/datasets.py b/Raw2TTree/python/tools/datasets.py
index 6fbd2f3..9fdd625 100644
--- a/Raw2TTree/python/tools/datasets.py
+++ b/Raw2TTree/python/tools/datasets.py
@@ -47,8 +47,8 @@ das = "https://cmsweb.cern.ch/das/request?view=list&limit=50&instance=prod%2Fglo
 #================================================================================================ 
 # PhaseIISpring17D
 #================================================================================================ 
-dasAll  = "https://cmsweb.cern.ch/das/request?view=list&limit=50&instance=prod%2Fglobal&input=dataset+dataset%3D%2F*%2F*PhaseIISpring17D*%2F*+status%3D*"
-dasDone = "https://cmsweb.cern.ch/das/request?view=list&limit=50&instance=prod%2Fglobal&input=dataset+dataset%3D%2F*%2F*PhaseIISpring17D*%2F*"
+dasAll  = "https://cmsweb.cern.ch/das/request?view=list&limit=100&instance=prod%2Fglobal&input=dataset%3D%2F*%2FPhaseIIFall17D*%2FGEN-SIM-DIGI-RAW"
+dasTauGun = "https://cmsweb.cern.ch/das/request?view=list&limit=50&instance=prod%2Fglobal&input=%2FRelValSingleTauFlatPt2To100_pythia8%2FCMSSW_9_3_7*D17*%2FGEN-SIM-DIGI-RAW"
 das     = dasAll
 
 ## FOR PHASAE 2 L1 2017FALL SALMPLES: https://cmsweb.cern.ch/das/request?view=list&limit=100&instance=prod%2Fglobal&input=dataset%3D%2F*%2FPhaseIIFall17D*%2FGEN-SIM-DIGI-RAW
@@ -92,6 +92,8 @@ datasetsSinglePion = []
 #datasetsSinglePion.append(Dataset('/SinglePion_FlatPt-8to100/PhaseIISpring17D-PU200_90X_upgrade2023_realistic_v9-v1/GEN-SIM-DIGI-RAW', dataVersion="90Xmc", dasQuery=das)) 
 
 datasetsSingleTau = []
+datasetsSingleTau.append(Dataset('/RelValSingleTauFlatPt2To100_pythia8/CMSSW_9_3_7-PU25ns_93X_upgrade2023_realistic_v5_2023D17PU200-v1/GEN-SIM-DIGI-RAW',dataVersion= "93Xmc", dasQuery=dasTauGun))
+datasetsSingleTau.append(Dataset('/RelValSingleTauFlatPt2To100_pythia8/CMSSW_9_3_7-93X_upgrade2023_realistic_v5_2023D17noPU-v2/GEN-SIM-DIGI-RAW', dataVersion="93Xmc", dasQuery=dasTauGun))
 #datasetsSingleTau.append(Dataset('/SingleTau_FlatPt-8to150/PhaseIISpring17D-NoPU_90X_upgrade2023_realistic_v9-v1/GEN-SIM-DIGI-RAW', dataVersion="90Xmc", dasQuery=das))
 #datasetsSingleTau.append(Dataset('/SingleTau_FlatPt-8to150/PhaseIISpring17D-PU140_90X_upgrade2023_realistic_v9-v1/GEN-SIM-DIGI-RAW', dataVersion="90Xmc", dasQuery=das))
 #datasetsSingleTau.append(Dataset('/SingleTau_FlatPt-8to150/PhaseIISpring17D-PU200_90X_upgrade2023_realistic_v9-v1/GEN-SIM-DIGI-RAW', dataVersion="90Xmc", dasQuery=das))
@@ -146,11 +148,11 @@ L1TauDatasets = []
 #L1TauDatasets.extend(datasetsTTbar)
 
 MyDatasets = []
-MyDatasets.extend(datasetsSingleNu)
-MyDatasets.extend(datasetsTT)
-MyDatasets.extend(datasetsH2tautau)
-MyDatasets.extend(datasetsChargedHiggs)
-
+#MyDatasets.extend(datasetsSingleNu)
+#MyDatasets.extend(datasetsTT)
+#MyDatasets.extend(datasetsH2tautau)
+#MyDatasets.extend(datasetsChargedHiggs)
+MyDatasets.extend(datasetsSingleTau)
 
 AllDatasets = []
 AllDatasets.extend(datasetsBs)
diff --git a/Raw2TTree/python/tools/datasets.pyc b/Raw2TTree/python/tools/datasets.pyc
index a7f98bc..c3c056a 100644
Binary files a/Raw2TTree/python/tools/datasets.pyc and b/Raw2TTree/python/tools/datasets.pyc differ
diff --git a/Raw2TTree/python/tools/git.pyc b/Raw2TTree/python/tools/git.pyc
index c25038e..c61d8ef 100644
Binary files a/Raw2TTree/python/tools/git.pyc and b/Raw2TTree/python/tools/git.pyc differ

